import{_ as s,c as n,o as a,b as l}from"./app.c2134f6f.js";const B=JSON.parse('{"title":"\u73AF\u5883\u914D\u7F6E","description":"","frontmatter":{"outline":"deep"},"headers":[{"level":2,"title":"\u5168\u5C40\u914D\u7F6E","slug":"\u5168\u5C40\u914D\u7F6E","link":"#\u5168\u5C40\u914D\u7F6E","children":[]},{"level":2,"title":"\u914D\u7F6E\u9879\u8BF4\u660E","slug":"\u914D\u7F6E\u9879\u8BF4\u660E","link":"#\u914D\u7F6E\u9879\u8BF4\u660E","children":[{"level":3,"title":"application.yml","slug":"application-yml","link":"#application-yml","children":[]},{"level":3,"title":"application-dev.yml","slug":"application-dev-yml","link":"#application-dev-yml","children":[]},{"level":3,"title":"application-basic.yml","slug":"application-basic-yml","link":"#application-basic-yml","children":[]},{"level":3,"title":"application-basic-dev.yml","slug":"application-basic-dev-yml","link":"#application-basic-dev-yml","children":[]}]},{"level":2,"title":"\u81EA\u5B9A\u4E49\u5E94\u7528\u914D\u7F6E","slug":"\u81EA\u5B9A\u4E49\u5E94\u7528\u914D\u7F6E","link":"#\u81EA\u5B9A\u4E49\u5E94\u7528\u914D\u7F6E","children":[]},{"level":2,"title":"WebMVC \u914D\u7F6E","slug":"webmvc-\u914D\u7F6E","link":"#webmvc-\u914D\u7F6E","children":[{"level":3,"title":"\u62E6\u622A\u5668\u914D\u7F6E","slug":"\u62E6\u622A\u5668\u914D\u7F6E","link":"#\u62E6\u622A\u5668\u914D\u7F6E","children":[]},{"level":3,"title":"\u8DE8\u57DF\u8BF7\u6C42\u914D\u7F6E","slug":"\u8DE8\u57DF\u8BF7\u6C42\u914D\u7F6E","link":"#\u8DE8\u57DF\u8BF7\u6C42\u914D\u7F6E","children":[]}]},{"level":2,"title":"MyBatis-Plus \u914D\u7F6E","slug":"mybatis-plus-\u914D\u7F6E","link":"#mybatis-plus-\u914D\u7F6E","children":[{"level":3,"title":"\u5168\u5C40\u914D\u7F6E","slug":"\u5168\u5C40\u914D\u7F6E-1","link":"#\u5168\u5C40\u914D\u7F6E-1","children":[]},{"level":3,"title":"\u6269\u5C55\u65B9\u6CD5","slug":"\u6269\u5C55\u65B9\u6CD5","link":"#\u6269\u5C55\u65B9\u6CD5","children":[]}]},{"level":2,"title":"Redis\u914D\u7F6E","slug":"redis\u914D\u7F6E","link":"#redis\u914D\u7F6E","children":[{"level":3,"title":"\u521D\u59CB\u5316 Redis \u914D\u7F6E","slug":"\u521D\u59CB\u5316-redis-\u914D\u7F6E","link":"#\u521D\u59CB\u5316-redis-\u914D\u7F6E","children":[]}]},{"level":2,"title":"Sa-Token\u914D\u7F6E","slug":"sa-token\u914D\u7F6E","link":"#sa-token\u914D\u7F6E","children":[]},{"level":2,"title":"\u9489\u9489\u914D\u7F6E","slug":"\u9489\u9489\u914D\u7F6E","link":"#\u9489\u9489\u914D\u7F6E","children":[{"level":3,"title":"\u521D\u59CB\u5316\u6570\u636E","slug":"\u521D\u59CB\u5316\u6570\u636E","link":"#\u521D\u59CB\u5316\u6570\u636E","children":[]}]},{"level":2,"title":"Druid \u76D1\u63A7\u914D\u7F6E","slug":"druid-\u76D1\u63A7\u914D\u7F6E","link":"#druid-\u76D1\u63A7\u914D\u7F6E","children":[{"level":3,"title":"\u521D\u59CB\u5316 Web \u76D1\u63A7 Filter","slug":"\u521D\u59CB\u5316-web-\u76D1\u63A7-filter","link":"#\u521D\u59CB\u5316-web-\u76D1\u63A7-filter","children":[]}]}],"relativePath":"app/settings.md","lastUpdated":1668781900000}'),p={name:"app/settings.md"},o=l(`<h1 id="\u73AF\u5883\u914D\u7F6E" tabindex="-1">\u73AF\u5883\u914D\u7F6E <a class="header-anchor" href="#\u73AF\u5883\u914D\u7F6E" aria-hidden="true">#</a></h1><blockquote><p>\u7528\u4E8E\u4FEE\u6539\u9879\u76EE\u7684\u5168\u5C40\u914D\u7F6E\u3001MyBatis-Plus\u914D\u7F6E\u3001Redis\u914D\u7F6E\u3001Sa-Token\u914D\u7F6E\u3001\u9489\u9489\u914D\u7F6E\u7B49\u7B49</p></blockquote><h2 id="\u5168\u5C40\u914D\u7F6E" tabindex="-1">\u5168\u5C40\u914D\u7F6E <a class="header-anchor" href="#\u5168\u5C40\u914D\u7F6E" aria-hidden="true">#</a></h2><p>\u9879\u76EE\u7684\u73AF\u5883\u53D8\u91CF\u914D\u7F6E\u4F4D\u4E8E\u9879\u76EE\u6839\u76EE\u5F55\u4E0B\u7684 <a href="https://github.com/elonehoo/benewy-template/blob/main/project/core/src/main/resources/application.yml" target="_blank" rel="noreferrer">application.yml</a>\u3001<a href="https://github.com/elonehoo/benewy-template/blob/main/project/core/src/main/resources/application-dev.yml" target="_blank" rel="noreferrer">application-dev.yml</a>\u3001<a href="https://github.com/elonehoo/benewy-template/blob/main/project/basic/src/main/resources/application-basic.yml" target="_blank" rel="noreferrer">application-basic.yml</a>\u3001<a href="https://github.com/elonehoo/benewy-template/blob/main/project/basic/src/main/resources/application-basic-dev.yml" target="_blank" rel="noreferrer">application-basic-dev.yml</a></p><h2 id="\u914D\u7F6E\u9879\u8BF4\u660E" tabindex="-1">\u914D\u7F6E\u9879\u8BF4\u660E <a class="header-anchor" href="#\u914D\u7F6E\u9879\u8BF4\u660E" aria-hidden="true">#</a></h2><h3 id="application-yml" tabindex="-1">application.yml <a class="header-anchor" href="#application-yml" aria-hidden="true">#</a></h3><blockquote><p>\u4E3B\u914D\u7F6E\u6587\u4EF6</p></blockquote><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;"># \u670D\u52A1\u914D\u7F6E</span></span>
<span class="line"><span style="color:#B8A965;">server</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">servlet</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">context-path</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">/lists</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u9879\u76EE\u8DEF\u5F84</span></span>
<span class="line"><span style="color:#758575DD;"># spring \u591A\u73AF\u5883\u914D\u7F6E</span></span>
<span class="line"><span style="color:#B8A965;">spring</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">profiles</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">include</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">basic,dev,basic-dev</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u5F15\u5165\u73AF\u5883\u914D\u7F6E\u6587\u4EF6</span></span>
<span class="line"><span style="color:#758575DD;"># \u5E94\u7528\u914D\u7F6E</span></span>
<span class="line"><span style="color:#B8A965;">appConfig</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">moduleType</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">admin</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u6A21\u5757\u7C7B\u578B</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;"># \u6392\u9664\u8BBF\u95EE\u8DEF\u5F84</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">excludePaths</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">/admin_sys_user/login,/admin_sys_user/qrLogin,/login/getLoginVerifyImg</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;"># \u670D\u52A1\u914D\u7F6E</span></span>
<span class="line"><span style="color:#998418;">server</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">servlet</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">context-path</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">/lists</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u9879\u76EE\u8DEF\u5F84</span></span>
<span class="line"><span style="color:#A0ADA0;"># spring \u591A\u73AF\u5883\u914D\u7F6E</span></span>
<span class="line"><span style="color:#998418;">spring</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">profiles</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">include</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">basic,dev,basic-dev</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u5F15\u5165\u73AF\u5883\u914D\u7F6E\u6587\u4EF6</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u5E94\u7528\u914D\u7F6E</span></span>
<span class="line"><span style="color:#998418;">appConfig</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">moduleType</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">admin</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u6A21\u5757\u7C7B\u578B</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;"># \u6392\u9664\u8BBF\u95EE\u8DEF\u5F84</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">excludePaths</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">/admin_sys_user/login,/admin_sys_user/qrLogin,/login/getLoginVerifyImg</span></span>
<span class="line"></span></code></pre></div><h3 id="application-dev-yml" tabindex="-1">application-dev.yml <a class="header-anchor" href="#application-dev-yml" aria-hidden="true">#</a></h3><blockquote><p>\u5F00\u53D1\u73AF\u5883\u9002\u7528</p></blockquote><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#B8A965;">server</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">port</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">8080</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u7AEF\u53E3\u53F7</span></span>
<span class="line"><span style="color:#B8A965;">spring</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">servlet</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">multipart</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">enabled</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u652F\u6301\u6587\u4EF6\u4E0A\u4F20</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">max-file-size</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">50MB</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u4E0A\u4F20\u6587\u4EF6\u5927\u5C0F</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">max-request-size</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">100MB</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u6570\u636E\u603B\u5927\u5C0F</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">redis</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">database</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u6570\u636E\u5E93\u7F16\u53F7</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">host</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">127.0.0.1</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># ip\u5730\u5740</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">port</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">6379</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u8BBF\u95EE\u7AEF\u53E3</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">password</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;">      </span><span style="color:#758575DD;"># \u5BC6\u7801\uFF08\u9ED8\u8BA4\u4E3A\u7A7A\uFF09</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">timeout</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">6000ms</span><span style="color:#DBD7CAEE;">  </span><span style="color:#758575DD;"># \u8FDE\u63A5\u8D85\u65F6\u65F6\u957F\uFF08\u6BEB\u79D2\uFF09</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">lettuce</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">pool</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">max-active</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1000</span><span style="color:#DBD7CAEE;">  </span><span style="color:#758575DD;"># \u8FDE\u63A5\u6C60\u6700\u5927\u8FDE\u63A5\u6570\uFF08\u4F7F\u7528\u8D1F\u503C\u8868\u793A\u6CA1\u6709\u9650\u5236\uFF09</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">max-wait</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">10000ms</span><span style="color:#DBD7CAEE;">      </span><span style="color:#758575DD;"># \u8FDE\u63A5\u6C60\u6700\u5927\u963B\u585E\u7B49\u5F85\u65F6\u95F4\uFF08\u4F7F\u7528\u8D1F\u503C\u8868\u793A\u6CA1\u6709\u9650\u5236\uFF09</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">max-idle</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">10</span><span style="color:#DBD7CAEE;">      </span><span style="color:#758575DD;"># \u8FDE\u63A5\u6C60\u4E2D\u7684\u6700\u5927\u7A7A\u95F2\u8FDE\u63A5</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">min-idle</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">5</span><span style="color:#DBD7CAEE;">       </span><span style="color:#758575DD;"># \u8FDE\u63A5\u6C60\u4E2D\u7684\u6700\u5C0F\u7A7A\u95F2\u8FDE\u63A5</span></span>
<span class="line"><span style="color:#B8A965;">mybatis-plus</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">configuration</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">log-impl</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">org.apache.ibatis.logging.stdout.StdOutImpl</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u6253\u5370SQL\u8BED\u53E5</span></span>
<span class="line"><span style="color:#758575DD;"># Sa-Token\u914D\u7F6E</span></span>
<span class="line"><span style="color:#B8A965;">sa-token</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;"># token\u6709\u6548\u671F\uFF0C\u5355\u4F4Ds \u9ED8\u8BA430\u5929, -1\u4EE3\u8868\u6C38\u4E0D\u8FC7\u671F</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">timeout</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">2592000</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;"># token\u4E34\u65F6\u6709\u6548\u671F (\u6307\u5B9A\u65F6\u95F4\u5185\u65E0\u64CD\u4F5C\u5C31\u89C6\u4E3Atoken\u8FC7\u671F) \u5355\u4F4D: \u79D2</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">activity-timeout</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">-1</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;"># \u662F\u5426\u5141\u8BB8\u540C\u4E00\u8D26\u53F7\u5E76\u53D1\u767B\u5F55 (\u4E3Atrue\u65F6\u5141\u8BB8\u4E00\u8D77\u767B\u5F55, \u4E3Afalse\u65F6\u65B0\u767B\u5F55\u6324\u6389\u65E7\u767B\u5F55)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">is-concurrent</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;"># \u5728\u591A\u4EBA\u767B\u5F55\u540C\u4E00\u8D26\u53F7\u65F6\uFF0C\u662F\u5426\u5171\u7528\u4E00\u4E2Atoken (\u4E3Atrue\u65F6\u6240\u6709\u767B\u5F55\u5171\u7528\u4E00\u4E2Atoken, \u4E3Afalse\u65F6\u6BCF\u6B21\u767B\u5F55\u65B0\u5EFA\u4E00\u4E2Atoken)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">is-share</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">false</span></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;"># \u662F\u5426\u8F93\u51FA\u64CD\u4F5C\u65E5\u5FD7</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">is-log</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#998418;">server</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">port</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">8080</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u7AEF\u53E3\u53F7</span></span>
<span class="line"><span style="color:#998418;">spring</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">servlet</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">multipart</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">enabled</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u652F\u6301\u6587\u4EF6\u4E0A\u4F20</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">max-file-size</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">50MB</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u4E0A\u4F20\u6587\u4EF6\u5927\u5C0F</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">max-request-size</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">100MB</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u6570\u636E\u603B\u5927\u5C0F</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">redis</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">database</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u6570\u636E\u5E93\u7F16\u53F7</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">host</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">127.0.0.1</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># ip\u5730\u5740</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">port</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">6379</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u8BBF\u95EE\u7AEF\u53E3</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">password</span><span style="color:#999999;">:</span><span style="color:#393A34;">      </span><span style="color:#A0ADA0;"># \u5BC6\u7801\uFF08\u9ED8\u8BA4\u4E3A\u7A7A\uFF09</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">timeout</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">6000ms</span><span style="color:#393A34;">  </span><span style="color:#A0ADA0;"># \u8FDE\u63A5\u8D85\u65F6\u65F6\u957F\uFF08\u6BEB\u79D2\uFF09</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">lettuce</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">pool</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">max-active</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1000</span><span style="color:#393A34;">  </span><span style="color:#A0ADA0;"># \u8FDE\u63A5\u6C60\u6700\u5927\u8FDE\u63A5\u6570\uFF08\u4F7F\u7528\u8D1F\u503C\u8868\u793A\u6CA1\u6709\u9650\u5236\uFF09</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">max-wait</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">10000ms</span><span style="color:#393A34;">      </span><span style="color:#A0ADA0;"># \u8FDE\u63A5\u6C60\u6700\u5927\u963B\u585E\u7B49\u5F85\u65F6\u95F4\uFF08\u4F7F\u7528\u8D1F\u503C\u8868\u793A\u6CA1\u6709\u9650\u5236\uFF09</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">max-idle</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">10</span><span style="color:#393A34;">      </span><span style="color:#A0ADA0;"># \u8FDE\u63A5\u6C60\u4E2D\u7684\u6700\u5927\u7A7A\u95F2\u8FDE\u63A5</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">min-idle</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">5</span><span style="color:#393A34;">       </span><span style="color:#A0ADA0;"># \u8FDE\u63A5\u6C60\u4E2D\u7684\u6700\u5C0F\u7A7A\u95F2\u8FDE\u63A5</span></span>
<span class="line"><span style="color:#998418;">mybatis-plus</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">configuration</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">log-impl</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">org.apache.ibatis.logging.stdout.StdOutImpl</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u6253\u5370SQL\u8BED\u53E5</span></span>
<span class="line"><span style="color:#A0ADA0;"># Sa-Token\u914D\u7F6E</span></span>
<span class="line"><span style="color:#998418;">sa-token</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;"># token\u6709\u6548\u671F\uFF0C\u5355\u4F4Ds \u9ED8\u8BA430\u5929, -1\u4EE3\u8868\u6C38\u4E0D\u8FC7\u671F</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">timeout</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">2592000</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;"># token\u4E34\u65F6\u6709\u6548\u671F (\u6307\u5B9A\u65F6\u95F4\u5185\u65E0\u64CD\u4F5C\u5C31\u89C6\u4E3Atoken\u8FC7\u671F) \u5355\u4F4D: \u79D2</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">activity-timeout</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">-1</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;"># \u662F\u5426\u5141\u8BB8\u540C\u4E00\u8D26\u53F7\u5E76\u53D1\u767B\u5F55 (\u4E3Atrue\u65F6\u5141\u8BB8\u4E00\u8D77\u767B\u5F55, \u4E3Afalse\u65F6\u65B0\u767B\u5F55\u6324\u6389\u65E7\u767B\u5F55)</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">is-concurrent</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;"># \u5728\u591A\u4EBA\u767B\u5F55\u540C\u4E00\u8D26\u53F7\u65F6\uFF0C\u662F\u5426\u5171\u7528\u4E00\u4E2Atoken (\u4E3Atrue\u65F6\u6240\u6709\u767B\u5F55\u5171\u7528\u4E00\u4E2Atoken, \u4E3Afalse\u65F6\u6BCF\u6B21\u767B\u5F55\u65B0\u5EFA\u4E00\u4E2Atoken)</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">is-share</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">false</span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;"># \u662F\u5426\u8F93\u51FA\u64CD\u4F5C\u65E5\u5FD7</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">is-log</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span></span>
<span class="line"></span></code></pre></div><h3 id="application-basic-yml" tabindex="-1">application-basic.yml <a class="header-anchor" href="#application-basic-yml" aria-hidden="true">#</a></h3><blockquote><p>\u6240\u6709\u7684\u73AF\u5883\u4F7F\u7528\u90FD\u9002\u7528</p></blockquote><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#B8A965;">spring</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">config</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">activate</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">on-profile</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">basic</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#B8A965;">mybatis-plus</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">mapper-locations</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">classpath:com/beneway/basic/**/mapper/*.xml</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u626B\u63CFMapper\u6240\u5BF9\u5E94\u7684XML\u6587\u4EF6\u4F4D\u7F6E</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">type-aliases-package</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">com.beneway.**.entity</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u5305\u626B\u63CF\u8DEF\u5F84</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">global-config</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;">  </span><span style="color:#758575DD;"># MyBatis-Plus\u5168\u5C40\u914D\u7F6E</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">banner</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">false</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u662F\u5426\u63A7\u5236\u53F0 print mybatis-plus \u7684 LOGO</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">db-config</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u6570\u636E\u5E93\u914D\u7F6E</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">id-type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">ASSIGN_UUID</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u5168\u5C40\u9ED8\u8BA4\u4E3B\u952E\u7C7B\u578B</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">logic-delete-field</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">deleted</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u903B\u8F91\u5220\u9664\u5B57\u6BB5\u5C5E\u6027\u540D</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">logic-delete-value</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u903B\u8F91\u5DF2\u5220\u9664\u503C</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">logic-not-delete-value</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u903B\u8F91\u672A\u5220\u9664\u503C</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">configuration</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">map-underscore-to-camel-case</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u662F\u5426\u5F00\u542F\u81EA\u52A8\u9A7C\u5CF0\u547D\u540D\u89C4\u5219\u6620\u5C04</span></span>
<span class="line"><span style="color:#B8A965;">sa-token</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">is-print</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">false</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u662F\u5426\u5728\u521D\u59CB\u5316\u914D\u7F6E\u65F6\u6253\u5370\u7248\u672C\u5B57\u7B26\u753B</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">token-name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">access_token</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># Token \u540D\u79F0</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">token-style</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">tik</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># token\u98CE\u683C</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#998418;">spring</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">config</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">activate</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">on-profile</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">basic</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#998418;">mybatis-plus</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">mapper-locations</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">classpath:com/beneway/basic/**/mapper/*.xml</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u626B\u63CFMapper\u6240\u5BF9\u5E94\u7684XML\u6587\u4EF6\u4F4D\u7F6E</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">type-aliases-package</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">com.beneway.**.entity</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u5305\u626B\u63CF\u8DEF\u5F84</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">global-config</span><span style="color:#999999;">:</span><span style="color:#393A34;">  </span><span style="color:#A0ADA0;"># MyBatis-Plus\u5168\u5C40\u914D\u7F6E</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">banner</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">false</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u662F\u5426\u63A7\u5236\u53F0 print mybatis-plus \u7684 LOGO</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">db-config</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u6570\u636E\u5E93\u914D\u7F6E</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">id-type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">ASSIGN_UUID</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u5168\u5C40\u9ED8\u8BA4\u4E3B\u952E\u7C7B\u578B</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">logic-delete-field</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">deleted</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u903B\u8F91\u5220\u9664\u5B57\u6BB5\u5C5E\u6027\u540D</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">logic-delete-value</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u903B\u8F91\u5DF2\u5220\u9664\u503C</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">logic-not-delete-value</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u903B\u8F91\u672A\u5220\u9664\u503C</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">configuration</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">map-underscore-to-camel-case</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u662F\u5426\u5F00\u542F\u81EA\u52A8\u9A7C\u5CF0\u547D\u540D\u89C4\u5219\u6620\u5C04</span></span>
<span class="line"><span style="color:#998418;">sa-token</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">is-print</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">false</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u662F\u5426\u5728\u521D\u59CB\u5316\u914D\u7F6E\u65F6\u6253\u5370\u7248\u672C\u5B57\u7B26\u753B</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">token-name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">access_token</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># Token \u540D\u79F0</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">token-style</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">tik</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># token\u98CE\u683C</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h3 id="application-basic-dev-yml" tabindex="-1">application-basic-dev.yml <a class="header-anchor" href="#application-basic-dev-yml" aria-hidden="true">#</a></h3><blockquote><p>\u5F00\u53D1\u73AF\u5883\u9002\u7528</p></blockquote><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#B8A965;">spring</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">config</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">activate</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">on-profile</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">basic-dev</span><span style="color:#C98A7DAA;">&quot;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">datasource</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">type</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">com.alibaba.druid.pool.DruidDataSource</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u6570\u636E\u6E90\u7C7B\u578B</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">druid</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">tl-seven-lists</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u6570\u636E\u6E90\u540D\u79F0</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;"># \u8FDE\u63A5\u6570\u636E\u5E93\u7684url</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">url</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">jdbc:mysql://192.168.0.128:3307/tl-seven-lists?characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">username</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">root</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u8FDE\u63A5\u6570\u636E\u5E93\u7684\u7528\u6237\u540D</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">password</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">Beneway2021</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u8FDE\u63A5\u6570\u636E\u5E93\u7684\u5BC6\u7801</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">driver-class-name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">com.mysql.cj.jdbc.Driver</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u9A71\u52A8</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">initial-size</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">10</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u521D\u59CB\u5316\u65F6\u5EFA\u7ACB\u7269\u7406\u8FDE\u63A5\u7684\u4E2A\u6570</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">max-active</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">100</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u6700\u5927\u8FDE\u63A5\u6C60\u6570\u91CF</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">min-idle</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">10</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u6700\u5C0F\u8FDE\u63A5\u6C60\u6570\u91CF</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">max-wait</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">60000</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u83B7\u53D6\u8FDE\u63A5\u65F6\u6700\u5927\u7B49\u5F85\u65F6\u95F4</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">pool-prepared-statements</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u662F\u5426\u7F13\u5B58preparedStatement</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">max-pool-prepared-statement-per-connection-size</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">20</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u8981\u542F\u7528PSCache</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">time-between-eviction-runs-millis</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">60000</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u68C0\u6D4B\u8FDE\u63A5\u7684\u95F4\u9694\u65F6\u95F4</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">min-evictable-idle-time-millis</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">300000</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u8FDE\u63A5\u4FDD\u6301\u7A7A\u95F2\u800C\u4E0D\u88AB\u9A71\u9010\u7684\u6700\u5C0F\u65F6\u95F4</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">test-while-idle</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u6267\u884CvalidationQuery\u68C0\u6D4B\u8FDE\u63A5\u662F\u5426\u6709\u6548</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">test-on-borrow</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">false</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u7533\u8BF7\u8FDE\u63A5\u65F6\u6267\u884CvalidationQuery\u68C0\u6D4B\u8FDE\u63A5\u662F\u5426\u6709\u6548</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">test-on-return</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">false</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u5F52\u8FD8\u8FDE\u63A5\u65F6\u6267\u884CvalidationQuery\u68C0\u6D4B\u8FDE\u63A5\u662F\u5426\u6709\u6548</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">stat-view-servlet</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">enabled</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u542F\u7528DruidStatViewServlet</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">url-pattern</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">/druid/*</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">login-username</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">admin</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u767B\u5F55\u540D</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">login-password</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">123456</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u767B\u5F55\u5BC6\u7801</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#B8A965;">filter</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">config</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">enabled</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u542F\u7528\u76D1\u63A7\u7EDF\u8BA1\u62E6\u622A</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">stat</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">log-slow-sql</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u5F00\u542F\u6162\u67E5\u8BE2\u8BB0\u5F55</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">slow-sql-millis</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">1000</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u6162SQL\u8BB0\u5F55\u6807\u51C6\uFF0C\u8D85\u8FC71000ms\uFF0C\u5C31\u662F\u6162\u67E5\u8BE2</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">merge-sql</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">false</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u662F\u5426\u4F7F\u7528sql\u5408\u5E76\u7EDF\u8BA1</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">wall</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">config</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#B8A965;">multi-statement-allow</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u662F\u5426\u5141\u8BB8\u4E00\u6B21\u6267\u884C\u591A\u6761\u8BED\u53E5</span></span>
<span class="line"><span style="color:#758575DD;"># \u9489\u9489\u914D\u7F6E\u4FE1\u606F</span></span>
<span class="line"><span style="color:#B8A965;">dd-config</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">domainname</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">openplatform-pro.ding.zj.gov.cn</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u653F\u52A1\u9489\u9489\u7684\u57DF\u540D</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">tenantId</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">196729</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># \u79DF\u6237 id</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">pc</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">key</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">secret</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">appId</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">qrcode</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">key</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">zsht-ydjr_dingoa-cab47knRJraym</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># AccessKey\u79D8\u94A5</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">secret</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">ht6X4YAUMHIwwDX0G0E23A4rwTNtKA71HL5vJ25k</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># SecretKey\u79D8\u94A5</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">phone</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">key</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">zsht-m15L07V1tCqlak9kfgS3QNfIj</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># AccessKey\u79D8\u94A5</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">secret</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">ish1fmuCeotCs6V99H2j4AUIeDI0COD5Ov43n5R2</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># SecretKey\u79D8\u94A5</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">appId</span><span style="color:#666666;">:</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#998418;">spring</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">config</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">activate</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">on-profile</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">basic-dev</span><span style="color:#B56959AA;">&quot;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">datasource</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">com.alibaba.druid.pool.DruidDataSource</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u6570\u636E\u6E90\u7C7B\u578B</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">druid</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">tl-seven-lists</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u6570\u636E\u6E90\u540D\u79F0</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;"># \u8FDE\u63A5\u6570\u636E\u5E93\u7684url</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">url</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">jdbc:mysql://192.168.0.128:3307/tl-seven-lists?characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">username</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">root</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u8FDE\u63A5\u6570\u636E\u5E93\u7684\u7528\u6237\u540D</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">password</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Beneway2021</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u8FDE\u63A5\u6570\u636E\u5E93\u7684\u5BC6\u7801</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">driver-class-name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">com.mysql.cj.jdbc.Driver</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u9A71\u52A8</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">initial-size</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">10</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u521D\u59CB\u5316\u65F6\u5EFA\u7ACB\u7269\u7406\u8FDE\u63A5\u7684\u4E2A\u6570</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">max-active</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">100</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u6700\u5927\u8FDE\u63A5\u6C60\u6570\u91CF</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">min-idle</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">10</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u6700\u5C0F\u8FDE\u63A5\u6C60\u6570\u91CF</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">max-wait</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">60000</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u83B7\u53D6\u8FDE\u63A5\u65F6\u6700\u5927\u7B49\u5F85\u65F6\u95F4</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">pool-prepared-statements</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u662F\u5426\u7F13\u5B58preparedStatement</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">max-pool-prepared-statement-per-connection-size</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">20</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u8981\u542F\u7528PSCache</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">time-between-eviction-runs-millis</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">60000</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u68C0\u6D4B\u8FDE\u63A5\u7684\u95F4\u9694\u65F6\u95F4</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">min-evictable-idle-time-millis</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">300000</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u8FDE\u63A5\u4FDD\u6301\u7A7A\u95F2\u800C\u4E0D\u88AB\u9A71\u9010\u7684\u6700\u5C0F\u65F6\u95F4</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">test-while-idle</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u6267\u884CvalidationQuery\u68C0\u6D4B\u8FDE\u63A5\u662F\u5426\u6709\u6548</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">test-on-borrow</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">false</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u7533\u8BF7\u8FDE\u63A5\u65F6\u6267\u884CvalidationQuery\u68C0\u6D4B\u8FDE\u63A5\u662F\u5426\u6709\u6548</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">test-on-return</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">false</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u5F52\u8FD8\u8FDE\u63A5\u65F6\u6267\u884CvalidationQuery\u68C0\u6D4B\u8FDE\u63A5\u662F\u5426\u6709\u6548</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">stat-view-servlet</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">enabled</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u542F\u7528DruidStatViewServlet</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">url-pattern</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">/druid/*</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">login-username</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">admin</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u767B\u5F55\u540D</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">login-password</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">123456</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u767B\u5F55\u5BC6\u7801</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">filter</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">config</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">enabled</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u542F\u7528\u76D1\u63A7\u7EDF\u8BA1\u62E6\u622A</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">stat</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">log-slow-sql</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u5F00\u542F\u6162\u67E5\u8BE2\u8BB0\u5F55</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">slow-sql-millis</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">1000</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u6162SQL\u8BB0\u5F55\u6807\u51C6\uFF0C\u8D85\u8FC71000ms\uFF0C\u5C31\u662F\u6162\u67E5\u8BE2</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">merge-sql</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">false</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u662F\u5426\u4F7F\u7528sql\u5408\u5E76\u7EDF\u8BA1</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">wall</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">config</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#998418;">multi-statement-allow</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u662F\u5426\u5141\u8BB8\u4E00\u6B21\u6267\u884C\u591A\u6761\u8BED\u53E5</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u9489\u9489\u914D\u7F6E\u4FE1\u606F</span></span>
<span class="line"><span style="color:#998418;">dd-config</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">domainname</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">openplatform-pro.ding.zj.gov.cn</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u653F\u52A1\u9489\u9489\u7684\u57DF\u540D</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">tenantId</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">196729</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># \u79DF\u6237 id</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">pc</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">key</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">secret</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">appId</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">qrcode</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">key</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">zsht-ydjr_dingoa-cab47knRJraym</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># AccessKey\u79D8\u94A5</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">secret</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">ht6X4YAUMHIwwDX0G0E23A4rwTNtKA71HL5vJ25k</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># SecretKey\u79D8\u94A5</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">phone</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">key</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">zsht-m15L07V1tCqlak9kfgS3QNfIj</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># AccessKey\u79D8\u94A5</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">secret</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">ish1fmuCeotCs6V99H2j4AUIeDI0COD5Ov43n5R2</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># SecretKey\u79D8\u94A5</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">appId</span><span style="color:#999999;">:</span></span>
<span class="line"></span></code></pre></div><h2 id="\u81EA\u5B9A\u4E49\u5E94\u7528\u914D\u7F6E" tabindex="-1">\u81EA\u5B9A\u4E49\u5E94\u7528\u914D\u7F6E <a class="header-anchor" href="#\u81EA\u5B9A\u4E49\u5E94\u7528\u914D\u7F6E" aria-hidden="true">#</a></h2><blockquote><p>\u52A0\u8F7D\u81EA\u5B9A\u4E49\u5E94\u7528\u914D\u7F6E\uFF0C\u6269\u5C55\u5E94\u7528\u914D\u7F6E\u9700\u6C42</p></blockquote><div class="tip custom-block"><p class="custom-block-title">\u63D0\u793A</p><p>\u5982\u82E5\u8FD8\u9700\u8981\u6DFB\u52A0\u5176\u4ED6\u7684\u5E94\u7528\u914D\u7F6E\uFF0C\u53EF\u81EA\u884C\u5728 <a href="./settings.html#application-yml">application.yml</a> \u6587\u4EF6\u7684<code>appConfig</code>\u4E0B\u6DFB\u52A0\u6240\u9700\u5C5E\u6027\uFF0C\u5E76\u5728 <a href="https://github.com/elonehoo/benewy-template/blob/main/project/basic/src/main/java/com/beneway/basic/config/AppConfig.java" target="_blank" rel="noreferrer">AppConfig</a> \u4E2D\u6DFB\u52A0\u5176\u79C1\u6709\u53D8\u91CF\u548C\u5BF9\u5E94\u65B9\u6CD5\uFF0C\u53EF\u53C2\u8003\u5982\u4E0B\u793A\u4F8B\u4EE3\u7801</p></div><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#4D9375;">package</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">beneway</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">basic</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">config</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> lombok</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Data</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">beans</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">factory</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Value</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">context</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Configuration</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">@</span><span style="color:#CB7676;">Data</span></span>
<span class="line"><span style="color:#666666;">@</span><span style="color:#CB7676;">Configuration</span></span>
<span class="line"><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">class</span><span style="color:#DBD7CAEE;"> </span><span style="color:#5DA9A7;">AppConfig</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Value</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\${spring.profiles.include}</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">private</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">String</span><span style="color:#666666;">[]</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">actives</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Value</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\${appConfig.excludePaths}</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">private</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">String</span><span style="color:#666666;">[]</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">excludePaths</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Value</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\${appConfig.moduleType}</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">private</span><span style="color:#DBD7CAEE;"> String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">moduleType</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">void</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">setActive</span><span style="color:#666666;">(</span><span style="color:#CB7676;">String</span><span style="color:#666666;">[]</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">actives</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">actives</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">null</span><span style="color:#666666;">){</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">actives</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> actives</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">void</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">setExcludePaths</span><span style="color:#666666;">(</span><span style="color:#CB7676;">String</span><span style="color:#666666;">[]</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">excludePaths</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">excludePaths</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">null</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">excludePaths</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> excludePaths</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">void</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">setModuleType</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">String </span><span style="color:#BD976A;">moduleType</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">moduleType</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">null</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">moduleType</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> moduleType</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#1E754F;">package</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">beneway</span><span style="color:#999999;">.</span><span style="color:#393A34;">basic</span><span style="color:#999999;">.</span><span style="color:#393A34;">config</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> lombok</span><span style="color:#999999;">.</span><span style="color:#393A34;">Data</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">beans</span><span style="color:#999999;">.</span><span style="color:#393A34;">factory</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">Value</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">context</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">Configuration</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">@</span><span style="color:#AB5959;">Data</span></span>
<span class="line"><span style="color:#999999;">@</span><span style="color:#AB5959;">Configuration</span></span>
<span class="line"><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">class</span><span style="color:#393A34;"> </span><span style="color:#2E808F;">AppConfig</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Value</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\${spring.profiles.include}</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">private</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">String</span><span style="color:#999999;">[]</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">actives</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Value</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\${appConfig.excludePaths}</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">private</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">String</span><span style="color:#999999;">[]</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">excludePaths</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Value</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\${appConfig.moduleType}</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">private</span><span style="color:#393A34;"> String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">moduleType</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">void</span><span style="color:#393A34;"> </span><span style="color:#59873A;">setActive</span><span style="color:#999999;">(</span><span style="color:#AB5959;">String</span><span style="color:#999999;">[]</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">actives</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">actives</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">null</span><span style="color:#999999;">){</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">actives</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> actives</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">void</span><span style="color:#393A34;"> </span><span style="color:#59873A;">setExcludePaths</span><span style="color:#999999;">(</span><span style="color:#AB5959;">String</span><span style="color:#999999;">[]</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">excludePaths</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">excludePaths</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">null</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">excludePaths</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> excludePaths</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">void</span><span style="color:#393A34;"> </span><span style="color:#59873A;">setModuleType</span><span style="color:#999999;">(</span><span style="color:#393A34;">String </span><span style="color:#B07D48;">moduleType</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">moduleType</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">null</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">moduleType</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> moduleType</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="webmvc-\u914D\u7F6E" tabindex="-1">WebMVC \u914D\u7F6E <a class="header-anchor" href="#webmvc-\u914D\u7F6E" aria-hidden="true">#</a></h2><p>\u9879\u76EE\u7684WebMVC\u6587\u4EF6\u4F4D\u4E8E\u9879\u76EE\u6839\u9879\u76EE\u4E0B <a href="https://github.com/elonehoo/benewy-template/blob/main/project/web/src/main/java/com/beneway/web/config/WebMvcConfig.java" target="_blank" rel="noreferrer">WebMvcConfig</a></p><blockquote><p>\u7528\u4E8E\u914D\u7F6EWebMVC\u7684\u62E6\u622A\u5668\u3001\u8DE8\u57DF\u8BF7\u6C42\u3001\u9759\u6001\u8D44\u6E90\u7B49</p></blockquote><h3 id="\u62E6\u622A\u5668\u914D\u7F6E" tabindex="-1">\u62E6\u622A\u5668\u914D\u7F6E <a class="header-anchor" href="#\u62E6\u622A\u5668\u914D\u7F6E" aria-hidden="true">#</a></h3><blockquote><p>\u7528\u4E8E\u65E5\u5FD7\u8BB0\u5F55\u3001\u767B\u5F55\u5224\u65AD\u3001\u6743\u9650\u68C0\u67E5\u7B49\u4F5C\u7528</p></blockquote><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#4D9375;">package</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">beneway</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">web</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">config</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">beneway</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">basic</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">config</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">AppConfig</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">beneway</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">web</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">interceptor</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">AuthInterceptor</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">beneway</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">web</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">interceptor</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">ReqLogInterceptor</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">context</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Configuration</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">web</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">servlet</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">config</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">InterceptorRegistry</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">web</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">servlet</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">config</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">WebMvcConfigurer</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> javax</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Resource</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> java</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">util</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">logging</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Logger</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">@</span><span style="color:#CB7676;">Configuration</span></span>
<span class="line"><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">class</span><span style="color:#DBD7CAEE;"> </span><span style="color:#5DA9A7;">WebMvcConfig</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">implements</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">WebMvcConfigurer</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">static</span><span style="color:#DBD7CAEE;"> Logger</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">log</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Logger</span><span style="color:#666666;">.</span><span style="color:#80A665;">getLogger</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">com.beneway.web.config.WebMvcConfig</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Resource</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">private</span><span style="color:#DBD7CAEE;"> AppConfig</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">appConfig</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Override</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">void</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">addInterceptors</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">InterceptorRegistry </span><span style="color:#BD976A;">registry</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">// \u6DFB\u52A0\u8BBF\u95EE\u65E5\u5FD7\u8BB0\u5F55\u62E6\u622A\u5668\uFF0C\u5339\u914D\u6240\u6709\u8DEF\u5F84</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">registry</span><span style="color:#666666;">.</span><span style="color:#80A665;">addInterceptor</span><span style="color:#666666;">(</span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">ReqLogInterceptor</span><span style="color:#666666;">())</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                </span><span style="color:#666666;">.</span><span style="color:#80A665;">addPathPatterns</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">/**</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">// \u5168\u5C40\u6392\u9664\u7684\u8BBF\u95EE\u8DEF\u5F84</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#CB7676;">String</span><span style="color:#666666;">[]</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">excludePaths</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">appConfig</span><span style="color:#666666;">.</span><span style="color:#80A665;">getExcludePaths</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">excludePaths </span><span style="color:#CB7676;">!=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">null</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#4D9375;">for</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">excludePath</span><span style="color:#C99076;"> </span><span style="color:#4D9375;">:</span><span style="color:#DBD7CAEE;"> excludePaths</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                </span><span style="color:#BD976A;">log</span><span style="color:#666666;">.</span><span style="color:#80A665;">info</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">excludepath:</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> excludePath</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">// \u6DFB\u52A0\u6743\u9650\u6821\u9A8C\u62E6\u622A\u5668\uFF0C\u5339\u914D\u6240\u6709\u8DEF\u5F84\uFF0C\u6307\u5B9A\u6392\u9664\u7684\u8BBF\u95EE\u8DEF\u5F84\uFF0C\u5982\u82E5\u672A\u6307\u5B9A\u5219\u653E\u5165\u4E00\u4E2A\u957F\u5EA6\u4E3A0\u7684\u7A7A\u6570\u7EC4</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">registry</span><span style="color:#666666;">.</span><span style="color:#80A665;">addInterceptor</span><span style="color:#666666;">(</span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">AuthInterceptor</span><span style="color:#666666;">())</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                </span><span style="color:#666666;">.</span><span style="color:#80A665;">addPathPatterns</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">/**</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                </span><span style="color:#666666;">.</span><span style="color:#80A665;">excludePathPatterns</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">excludePaths </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">null</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">?</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">String</span><span style="color:#666666;">[</span><span style="color:#4C9A91;">0</span><span style="color:#666666;">]</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">:</span><span style="color:#DBD7CAEE;"> excludePaths</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#1E754F;">package</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">beneway</span><span style="color:#999999;">.</span><span style="color:#393A34;">web</span><span style="color:#999999;">.</span><span style="color:#393A34;">config</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">beneway</span><span style="color:#999999;">.</span><span style="color:#393A34;">basic</span><span style="color:#999999;">.</span><span style="color:#393A34;">config</span><span style="color:#999999;">.</span><span style="color:#393A34;">AppConfig</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">beneway</span><span style="color:#999999;">.</span><span style="color:#393A34;">web</span><span style="color:#999999;">.</span><span style="color:#393A34;">interceptor</span><span style="color:#999999;">.</span><span style="color:#393A34;">AuthInterceptor</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">beneway</span><span style="color:#999999;">.</span><span style="color:#393A34;">web</span><span style="color:#999999;">.</span><span style="color:#393A34;">interceptor</span><span style="color:#999999;">.</span><span style="color:#393A34;">ReqLogInterceptor</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">context</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">Configuration</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">web</span><span style="color:#999999;">.</span><span style="color:#393A34;">servlet</span><span style="color:#999999;">.</span><span style="color:#393A34;">config</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">InterceptorRegistry</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">web</span><span style="color:#999999;">.</span><span style="color:#393A34;">servlet</span><span style="color:#999999;">.</span><span style="color:#393A34;">config</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">WebMvcConfigurer</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> javax</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">Resource</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> java</span><span style="color:#999999;">.</span><span style="color:#393A34;">util</span><span style="color:#999999;">.</span><span style="color:#393A34;">logging</span><span style="color:#999999;">.</span><span style="color:#393A34;">Logger</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">@</span><span style="color:#AB5959;">Configuration</span></span>
<span class="line"><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">class</span><span style="color:#393A34;"> </span><span style="color:#2E808F;">WebMvcConfig</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">implements</span><span style="color:#393A34;"> </span><span style="color:#59873A;">WebMvcConfigurer</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">static</span><span style="color:#393A34;"> Logger</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">log</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Logger</span><span style="color:#999999;">.</span><span style="color:#59873A;">getLogger</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">com.beneway.web.config.WebMvcConfig</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Resource</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">private</span><span style="color:#393A34;"> AppConfig</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">appConfig</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Override</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">void</span><span style="color:#393A34;"> </span><span style="color:#59873A;">addInterceptors</span><span style="color:#999999;">(</span><span style="color:#393A34;">InterceptorRegistry </span><span style="color:#B07D48;">registry</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">// \u6DFB\u52A0\u8BBF\u95EE\u65E5\u5FD7\u8BB0\u5F55\u62E6\u622A\u5668\uFF0C\u5339\u914D\u6240\u6709\u8DEF\u5F84</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">registry</span><span style="color:#999999;">.</span><span style="color:#59873A;">addInterceptor</span><span style="color:#999999;">(</span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">ReqLogInterceptor</span><span style="color:#999999;">())</span></span>
<span class="line"><span style="color:#393A34;">                </span><span style="color:#999999;">.</span><span style="color:#59873A;">addPathPatterns</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">/**</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">// \u5168\u5C40\u6392\u9664\u7684\u8BBF\u95EE\u8DEF\u5F84</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#AB5959;">String</span><span style="color:#999999;">[]</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">excludePaths</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">appConfig</span><span style="color:#999999;">.</span><span style="color:#59873A;">getExcludePaths</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#393A34;">excludePaths </span><span style="color:#AB5959;">!=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">null</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#1E754F;">for</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#393A34;">String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">excludePath</span><span style="color:#A65E2B;"> </span><span style="color:#1E754F;">:</span><span style="color:#393A34;"> excludePaths</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">                </span><span style="color:#B07D48;">log</span><span style="color:#999999;">.</span><span style="color:#59873A;">info</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">excludepath:</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> excludePath</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">// \u6DFB\u52A0\u6743\u9650\u6821\u9A8C\u62E6\u622A\u5668\uFF0C\u5339\u914D\u6240\u6709\u8DEF\u5F84\uFF0C\u6307\u5B9A\u6392\u9664\u7684\u8BBF\u95EE\u8DEF\u5F84\uFF0C\u5982\u82E5\u672A\u6307\u5B9A\u5219\u653E\u5165\u4E00\u4E2A\u957F\u5EA6\u4E3A0\u7684\u7A7A\u6570\u7EC4</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">registry</span><span style="color:#999999;">.</span><span style="color:#59873A;">addInterceptor</span><span style="color:#999999;">(</span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">AuthInterceptor</span><span style="color:#999999;">())</span></span>
<span class="line"><span style="color:#393A34;">                </span><span style="color:#999999;">.</span><span style="color:#59873A;">addPathPatterns</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">/**</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">                </span><span style="color:#999999;">.</span><span style="color:#59873A;">excludePathPatterns</span><span style="color:#999999;">(</span><span style="color:#393A34;">excludePaths </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">null</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">?</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">String</span><span style="color:#999999;">[</span><span style="color:#2F798A;">0</span><span style="color:#999999;">]</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">:</span><span style="color:#393A34;"> excludePaths</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="\u65E5\u5FD7\u8BB0\u5F55\u62E6\u622A\u5668" tabindex="-1">\u65E5\u5FD7\u8BB0\u5F55\u62E6\u622A\u5668 <a class="header-anchor" href="#\u65E5\u5FD7\u8BB0\u5F55\u62E6\u622A\u5668" aria-hidden="true">#</a></h4><blockquote><p>\u5176\u4F5C\u7528\u4E3A\u62E6\u622A\u6240\u6709\u8BF7\u6C42\uFF0C\u5E76\u5BF9\u6240\u6709\u8BF7\u6C42\u8FDB\u884C\u8BB0\u5F55</p></blockquote><p>\u4EE5\u4E0B\u4E3A\u6838\u5FC3\u4EE3\u7801\uFF0C\u53EF\u67E5\u770B <a href="https://github.com/elonehoo/benewy-template/blob/main/project/web/src/main/java/com/beneway/web/interceptor/ReqLogInterceptor.java" target="_blank" rel="noreferrer">ReqLogInterceptor</a> \u6587\u4EF6\u7684\u5177\u4F53\u914D\u7F6E</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#666666;">@</span><span style="color:#CB7676;">Override</span></span>
<span class="line"><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">void</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">afterCompletion</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">HttpServletRequest request</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> HttpServletResponse response</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> Object handler</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> Exception ex</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> throws Exception </span><span style="color:#666666;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">OPTIONS</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">.</span><span style="color:#80A665;">equals</span><span style="color:#666666;">(</span><span style="color:#BD976A;">request</span><span style="color:#666666;">.</span><span style="color:#80A665;">getMethod</span><span style="color:#666666;">())){</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">return</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#4D9375;">try</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">long</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">startTime</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">threadLocal</span><span style="color:#666666;">.</span><span style="color:#80A665;">get</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">threadLocal</span><span style="color:#666666;">.</span><span style="color:#80A665;">remove</span><span style="color:#666666;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">long</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">endTime</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">System</span><span style="color:#666666;">.</span><span style="color:#80A665;">currentTimeMillis</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u83B7\u53D6\u8BF7\u6C42url</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">requestURI</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">request</span><span style="color:#666666;">.</span><span style="color:#80A665;">getRequestURI</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u83B7\u53D6\u8BF7\u6C42\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">method</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">request</span><span style="color:#666666;">.</span><span style="color:#80A665;">getMethod</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u83B7\u53D6\u8BF7\u6C42ip</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">ip</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">IPUtil</span><span style="color:#666666;">.</span><span style="color:#80A665;">getIpAddr</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">request</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u83B7\u53D6\u8BF7\u6C42\u7528\u6237\u540D</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">username</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">loginuserService</span><span style="color:#666666;">.</span><span style="color:#80A665;">getUsername</span><span style="color:#666666;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u83B7\u53D6\u8BF7\u6C42params</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">params</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">null</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    Map</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">String</span><span style="color:#666666;">,</span><span style="color:#C99076;"> </span><span style="color:#CB7676;">String</span><span style="color:#666666;">[]&gt;</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">parameterMap</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">request</span><span style="color:#666666;">.</span><span style="color:#80A665;">getParameterMap</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">CollUtil</span><span style="color:#666666;">.</span><span style="color:#80A665;">isNotEmpty</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">parameterMap</span><span style="color:#666666;">))</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      params </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">gson</span><span style="color:#666666;">.</span><span style="color:#80A665;">toJson</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">parameterMap</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u83B7\u53D6\u8BF7\u6C42body</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">body</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">null</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u83B7\u53D6\u767B\u5F55\u7528\u6237id</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">loginUserId</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">null</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">try</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      loginUserId </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">appUtils</span><span style="color:#666666;">.</span><span style="color:#80A665;">getLoginUserId</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">catch</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">NullPointerException </span><span style="color:#BD976A;">e</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">catch</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">Exception </span><span style="color:#BD976A;">e</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">log</span><span style="color:#666666;">.</span><span style="color:#80A665;">warning</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u83B7\u53D6\u7528\u6237id\u5931\u8D25</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u8BA1\u7B97\u8BF7\u6C42\u6267\u884C\u8017\u65F6</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">long</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">duration</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> endTime </span><span style="color:#CB7676;">-</span><span style="color:#DBD7CAEE;"> startTime</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">finalParams</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> params</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">finalBody</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> body</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">finalLoginUserId</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> loginUserId</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    AutoExceptionInfo</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">autoExceptionInfo</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">AutoExceptionInfo</span><span style="color:#666666;">.</span><span style="color:#80A665;">getExceptionInfo</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    Future</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">?</span><span style="color:#666666;">&gt;</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">submit</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">executor</span><span style="color:#666666;">.</span><span style="color:#80A665;">submit</span><span style="color:#666666;">(()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">-&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u65E5\u5FD7\u5C01\u88C5</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">logs</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">String</span><span style="color:#666666;">.</span><span style="color:#80A665;">format</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u7528\u6237\uFF1A%s\uFF0Curi\uFF1A%s\uFF0Cmethod\uFF1A%s\uFF0Cip\uFF1A%s\uFF0C\u6267\u884C\u8017\u65F6\uFF1A%dms\uFF0Cparams\uFF1A%s, body\uFF1A%s</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> username</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> requestURI</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> method</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> ip</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> duration</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> finalParams</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> finalBody</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u67E5\u770B\u662F\u5426\u6709\u5F02\u5E38\u4FE1\u606F</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#CB7676;">boolean</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">isError</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">false</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">autoExceptionInfo </span><span style="color:#CB7676;">!=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">null</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        logs </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">errCode\uFF1A</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">autoExceptionInfo</span><span style="color:#666666;">.</span><span style="color:#80A665;">getCode</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\uFF0CerrMsg\uFF1A</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">autoExceptionInfo</span><span style="color:#666666;">.</span><span style="color:#80A665;">getMsg</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\uFF0C</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> logs</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">log</span><span style="color:#666666;">.</span><span style="color:#80A665;">warning</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">logs </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">autoExceptionInfo</span><span style="color:#666666;">.</span><span style="color:#80A665;">getE</span><span style="color:#666666;">());</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        isError </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">log</span><span style="color:#666666;">.</span><span style="color:#80A665;">info</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">logs</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u4FDD\u5B58\u65E5\u5FD7\u4FE1\u606F</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      LogReq</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">logReq</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">LogReq</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">logReq</span><span style="color:#666666;">.</span><span style="color:#80A665;">setUserId</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">finalLoginUserId</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      UserTypeEnum</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">loginUserType</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">appUtils</span><span style="color:#666666;">.</span><span style="color:#80A665;">getLoginUserType</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">logReq</span><span style="color:#666666;">.</span><span style="color:#80A665;">setUserType</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">loginUserType</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">logReq</span><span style="color:#666666;">.</span><span style="color:#80A665;">setReqUrl</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">requestURI</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">logReq</span><span style="color:#666666;">.</span><span style="color:#80A665;">setReqMethod</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">method</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">logReq</span><span style="color:#666666;">.</span><span style="color:#80A665;">setReqIp</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">ip</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">logReq</span><span style="color:#666666;">.</span><span style="color:#80A665;">setReqParams</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">finalParams</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">logReq</span><span style="color:#666666;">.</span><span style="color:#80A665;">setReqBody</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">finalBody</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">logReq</span><span style="color:#666666;">.</span><span style="color:#80A665;">setDuration</span><span style="color:#666666;">((</span><span style="color:#CB7676;">int</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;">duration</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">logReq</span><span style="color:#666666;">.</span><span style="color:#80A665;">setIsError</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">isError</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">isError</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        Throwable</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">throwable</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">autoExceptionInfo</span><span style="color:#666666;">.</span><span style="color:#80A665;">getE</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">throwable </span><span style="color:#CB7676;">!=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">null</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          PrintWriter</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">pw</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">null</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#4D9375;">try</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            StringWriter</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">sw</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">StringWriter</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            pw </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">PrintWriter</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">sw</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">throwable</span><span style="color:#666666;">.</span><span style="color:#80A665;">printStackTrace</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">pw</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">logReq</span><span style="color:#666666;">.</span><span style="color:#80A665;">setErrorInfo</span><span style="color:#666666;">(</span><span style="color:#BD976A;">sw</span><span style="color:#666666;">.</span><span style="color:#80A665;">toString</span><span style="color:#666666;">());</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">catch</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">Exception </span><span style="color:#BD976A;">e</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">log</span><span style="color:#666666;">.</span><span style="color:#80A665;">warning</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u8BF7\u6C42\u65E5\u5FD7\u5F02\u5E38\u4FE1\u606F\u83B7\u53D6\u5931\u8D25 </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> e</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">finally</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">pw </span><span style="color:#CB7676;">!=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">null</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">pw</span><span style="color:#666666;">.</span><span style="color:#80A665;">close</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#CB7676;">int</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">code</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">autoExceptionInfo</span><span style="color:#666666;">.</span><span style="color:#80A665;">getCode</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">errorCode</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">String</span><span style="color:#666666;">.</span><span style="color:#80A665;">valueOf</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">code</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">logReq</span><span style="color:#666666;">.</span><span style="color:#80A665;">setErrorCode</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">errorCode</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">logReq</span><span style="color:#666666;">.</span><span style="color:#80A665;">setErrorMsg</span><span style="color:#666666;">(</span><span style="color:#BD976A;">autoExceptionInfo</span><span style="color:#666666;">.</span><span style="color:#80A665;">getMsg</span><span style="color:#666666;">());</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">logReq</span><span style="color:#666666;">.</span><span style="color:#80A665;">setModuleType</span><span style="color:#666666;">(</span><span style="color:#BD976A;">appUtils</span><span style="color:#666666;">.</span><span style="color:#80A665;">getModuleType</span><span style="color:#666666;">());</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">logReq</span><span style="color:#666666;">.</span><span style="color:#80A665;">setCreateTime</span><span style="color:#666666;">(</span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">Date</span><span style="color:#666666;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#BD976A;">logReqService</span><span style="color:#666666;">.</span><span style="color:#80A665;">save</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">logReq</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">submit</span><span style="color:#666666;">.</span><span style="color:#80A665;">get</span><span style="color:#666666;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">catch</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">Exception </span><span style="color:#BD976A;">e</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#80A665;">printStackTrace</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">log</span><span style="color:#666666;">.</span><span style="color:#80A665;">warning</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">\u8BF7\u6C42\u65E5\u5FD7\u5904\u7406\u9519\u8BEF!</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">+</span><span style="color:#DBD7CAEE;"> e</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#999999;">@</span><span style="color:#AB5959;">Override</span></span>
<span class="line"><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">void</span><span style="color:#393A34;"> </span><span style="color:#59873A;">afterCompletion</span><span style="color:#999999;">(</span><span style="color:#393A34;">HttpServletRequest request</span><span style="color:#999999;">,</span><span style="color:#393A34;"> HttpServletResponse response</span><span style="color:#999999;">,</span><span style="color:#393A34;"> Object handler</span><span style="color:#999999;">,</span><span style="color:#393A34;"> Exception ex</span><span style="color:#999999;">)</span><span style="color:#393A34;"> throws Exception </span><span style="color:#999999;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">OPTIONS</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">.</span><span style="color:#59873A;">equals</span><span style="color:#999999;">(</span><span style="color:#B07D48;">request</span><span style="color:#999999;">.</span><span style="color:#59873A;">getMethod</span><span style="color:#999999;">())){</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">return</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1E754F;">try</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">long</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">startTime</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">threadLocal</span><span style="color:#999999;">.</span><span style="color:#59873A;">get</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">threadLocal</span><span style="color:#999999;">.</span><span style="color:#59873A;">remove</span><span style="color:#999999;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">long</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">endTime</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">System</span><span style="color:#999999;">.</span><span style="color:#59873A;">currentTimeMillis</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u83B7\u53D6\u8BF7\u6C42url</span></span>
<span class="line"><span style="color:#393A34;">    String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">requestURI</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">request</span><span style="color:#999999;">.</span><span style="color:#59873A;">getRequestURI</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u83B7\u53D6\u8BF7\u6C42\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#393A34;">    String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">method</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">request</span><span style="color:#999999;">.</span><span style="color:#59873A;">getMethod</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u83B7\u53D6\u8BF7\u6C42ip</span></span>
<span class="line"><span style="color:#393A34;">    String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">ip</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">IPUtil</span><span style="color:#999999;">.</span><span style="color:#59873A;">getIpAddr</span><span style="color:#999999;">(</span><span style="color:#393A34;">request</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u83B7\u53D6\u8BF7\u6C42\u7528\u6237\u540D</span></span>
<span class="line"><span style="color:#393A34;">    String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">username</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">loginuserService</span><span style="color:#999999;">.</span><span style="color:#59873A;">getUsername</span><span style="color:#999999;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u83B7\u53D6\u8BF7\u6C42params</span></span>
<span class="line"><span style="color:#393A34;">    String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">params</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">null</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    Map</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">String</span><span style="color:#999999;">,</span><span style="color:#A65E2B;"> </span><span style="color:#AB5959;">String</span><span style="color:#999999;">[]&gt;</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">parameterMap</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">request</span><span style="color:#999999;">.</span><span style="color:#59873A;">getParameterMap</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">CollUtil</span><span style="color:#999999;">.</span><span style="color:#59873A;">isNotEmpty</span><span style="color:#999999;">(</span><span style="color:#393A34;">parameterMap</span><span style="color:#999999;">))</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      params </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">gson</span><span style="color:#999999;">.</span><span style="color:#59873A;">toJson</span><span style="color:#999999;">(</span><span style="color:#393A34;">parameterMap</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u83B7\u53D6\u8BF7\u6C42body</span></span>
<span class="line"><span style="color:#393A34;">    String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">body</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">null</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u83B7\u53D6\u767B\u5F55\u7528\u6237id</span></span>
<span class="line"><span style="color:#393A34;">    String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">loginUserId</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">null</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">try</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      loginUserId </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">appUtils</span><span style="color:#999999;">.</span><span style="color:#59873A;">getLoginUserId</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">catch</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#393A34;">NullPointerException </span><span style="color:#B07D48;">e</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">catch</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#393A34;">Exception </span><span style="color:#B07D48;">e</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">log</span><span style="color:#999999;">.</span><span style="color:#59873A;">warning</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u83B7\u53D6\u7528\u6237id\u5931\u8D25</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u8BA1\u7B97\u8BF7\u6C42\u6267\u884C\u8017\u65F6</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">long</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">duration</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> endTime </span><span style="color:#AB5959;">-</span><span style="color:#393A34;"> startTime</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">finalParams</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> params</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">finalBody</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> body</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">finalLoginUserId</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> loginUserId</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    AutoExceptionInfo</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">autoExceptionInfo</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">AutoExceptionInfo</span><span style="color:#999999;">.</span><span style="color:#59873A;">getExceptionInfo</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    Future</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">?</span><span style="color:#999999;">&gt;</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">submit</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">executor</span><span style="color:#999999;">.</span><span style="color:#59873A;">submit</span><span style="color:#999999;">(()</span><span style="color:#393A34;"> </span><span style="color:#999999;">-&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u65E5\u5FD7\u5C01\u88C5</span></span>
<span class="line"><span style="color:#393A34;">      String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">logs</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">String</span><span style="color:#999999;">.</span><span style="color:#59873A;">format</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u7528\u6237\uFF1A%s\uFF0Curi\uFF1A%s\uFF0Cmethod\uFF1A%s\uFF0Cip\uFF1A%s\uFF0C\u6267\u884C\u8017\u65F6\uFF1A%dms\uFF0Cparams\uFF1A%s, body\uFF1A%s</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> username</span><span style="color:#999999;">,</span><span style="color:#393A34;"> requestURI</span><span style="color:#999999;">,</span><span style="color:#393A34;"> method</span><span style="color:#999999;">,</span><span style="color:#393A34;"> ip</span><span style="color:#999999;">,</span><span style="color:#393A34;"> duration</span><span style="color:#999999;">,</span><span style="color:#393A34;"> finalParams</span><span style="color:#999999;">,</span><span style="color:#393A34;"> finalBody</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u67E5\u770B\u662F\u5426\u6709\u5F02\u5E38\u4FE1\u606F</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">boolean</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">isError</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">false</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#393A34;">autoExceptionInfo </span><span style="color:#AB5959;">!=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">null</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        logs </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">errCode\uFF1A</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">autoExceptionInfo</span><span style="color:#999999;">.</span><span style="color:#59873A;">getCode</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\uFF0CerrMsg\uFF1A</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">autoExceptionInfo</span><span style="color:#999999;">.</span><span style="color:#59873A;">getMsg</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\uFF0C</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> logs</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">log</span><span style="color:#999999;">.</span><span style="color:#59873A;">warning</span><span style="color:#999999;">(</span><span style="color:#393A34;">logs </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">autoExceptionInfo</span><span style="color:#999999;">.</span><span style="color:#59873A;">getE</span><span style="color:#999999;">());</span></span>
<span class="line"><span style="color:#393A34;">        isError </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">log</span><span style="color:#999999;">.</span><span style="color:#59873A;">info</span><span style="color:#999999;">(</span><span style="color:#393A34;">logs</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u4FDD\u5B58\u65E5\u5FD7\u4FE1\u606F</span></span>
<span class="line"><span style="color:#393A34;">      LogReq</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">logReq</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">LogReq</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">logReq</span><span style="color:#999999;">.</span><span style="color:#59873A;">setUserId</span><span style="color:#999999;">(</span><span style="color:#393A34;">finalLoginUserId</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      UserTypeEnum</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">loginUserType</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">appUtils</span><span style="color:#999999;">.</span><span style="color:#59873A;">getLoginUserType</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">logReq</span><span style="color:#999999;">.</span><span style="color:#59873A;">setUserType</span><span style="color:#999999;">(</span><span style="color:#393A34;">loginUserType</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">logReq</span><span style="color:#999999;">.</span><span style="color:#59873A;">setReqUrl</span><span style="color:#999999;">(</span><span style="color:#393A34;">requestURI</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">logReq</span><span style="color:#999999;">.</span><span style="color:#59873A;">setReqMethod</span><span style="color:#999999;">(</span><span style="color:#393A34;">method</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">logReq</span><span style="color:#999999;">.</span><span style="color:#59873A;">setReqIp</span><span style="color:#999999;">(</span><span style="color:#393A34;">ip</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">logReq</span><span style="color:#999999;">.</span><span style="color:#59873A;">setReqParams</span><span style="color:#999999;">(</span><span style="color:#393A34;">finalParams</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">logReq</span><span style="color:#999999;">.</span><span style="color:#59873A;">setReqBody</span><span style="color:#999999;">(</span><span style="color:#393A34;">finalBody</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">logReq</span><span style="color:#999999;">.</span><span style="color:#59873A;">setDuration</span><span style="color:#999999;">((</span><span style="color:#AB5959;">int</span><span style="color:#999999;">)</span><span style="color:#393A34;">duration</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">logReq</span><span style="color:#999999;">.</span><span style="color:#59873A;">setIsError</span><span style="color:#999999;">(</span><span style="color:#393A34;">isError</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#393A34;">isError</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        Throwable</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">throwable</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">autoExceptionInfo</span><span style="color:#999999;">.</span><span style="color:#59873A;">getE</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#393A34;">throwable </span><span style="color:#AB5959;">!=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">null</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          PrintWriter</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">pw</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">null</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#1E754F;">try</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            StringWriter</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">sw</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">StringWriter</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">            pw </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">PrintWriter</span><span style="color:#999999;">(</span><span style="color:#393A34;">sw</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">throwable</span><span style="color:#999999;">.</span><span style="color:#59873A;">printStackTrace</span><span style="color:#999999;">(</span><span style="color:#393A34;">pw</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">logReq</span><span style="color:#999999;">.</span><span style="color:#59873A;">setErrorInfo</span><span style="color:#999999;">(</span><span style="color:#B07D48;">sw</span><span style="color:#999999;">.</span><span style="color:#59873A;">toString</span><span style="color:#999999;">());</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">catch</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#393A34;">Exception </span><span style="color:#B07D48;">e</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">log</span><span style="color:#999999;">.</span><span style="color:#59873A;">warning</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u8BF7\u6C42\u65E5\u5FD7\u5F02\u5E38\u4FE1\u606F\u83B7\u53D6\u5931\u8D25 </span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> e</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">finally</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#393A34;">pw </span><span style="color:#AB5959;">!=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">null</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">pw</span><span style="color:#999999;">.</span><span style="color:#59873A;">close</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#AB5959;">int</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">code</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">autoExceptionInfo</span><span style="color:#999999;">.</span><span style="color:#59873A;">getCode</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">        String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">errorCode</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">String</span><span style="color:#999999;">.</span><span style="color:#59873A;">valueOf</span><span style="color:#999999;">(</span><span style="color:#393A34;">code</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">logReq</span><span style="color:#999999;">.</span><span style="color:#59873A;">setErrorCode</span><span style="color:#999999;">(</span><span style="color:#393A34;">errorCode</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">logReq</span><span style="color:#999999;">.</span><span style="color:#59873A;">setErrorMsg</span><span style="color:#999999;">(</span><span style="color:#B07D48;">autoExceptionInfo</span><span style="color:#999999;">.</span><span style="color:#59873A;">getMsg</span><span style="color:#999999;">());</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">logReq</span><span style="color:#999999;">.</span><span style="color:#59873A;">setModuleType</span><span style="color:#999999;">(</span><span style="color:#B07D48;">appUtils</span><span style="color:#999999;">.</span><span style="color:#59873A;">getModuleType</span><span style="color:#999999;">());</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">logReq</span><span style="color:#999999;">.</span><span style="color:#59873A;">setCreateTime</span><span style="color:#999999;">(</span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">Date</span><span style="color:#999999;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B07D48;">logReqService</span><span style="color:#999999;">.</span><span style="color:#59873A;">save</span><span style="color:#999999;">(</span><span style="color:#393A34;">logReq</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">submit</span><span style="color:#999999;">.</span><span style="color:#59873A;">get</span><span style="color:#999999;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">catch</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#393A34;">Exception </span><span style="color:#B07D48;">e</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#59873A;">printStackTrace</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">log</span><span style="color:#999999;">.</span><span style="color:#59873A;">warning</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">\u8BF7\u6C42\u65E5\u5FD7\u5904\u7406\u9519\u8BEF!</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#393A34;"> e</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h4 id="\u6743\u9650\u6821\u9A8C\u62E6\u622A\u5668" tabindex="-1">\u6743\u9650\u6821\u9A8C\u62E6\u622A\u5668 <a class="header-anchor" href="#\u6743\u9650\u6821\u9A8C\u62E6\u622A\u5668" aria-hidden="true">#</a></h4><blockquote><p>\u6821\u9A8C\u7528\u6237\u7684\u8BBF\u95EE\u7684\u6743\u9650</p></blockquote><p>\u4EE5\u4E0B\u4E3A\u6838\u5FC3\u4EE3\u7801\uFF0C\u53EF\u67E5\u770B <a href="https://github.com/elonehoo/benewy-template/blob/main/project/web/src/main/java/com/beneway/web/interceptor/AuthInterceptor.java" target="_blank" rel="noreferrer">AuthInterceptor</a> \u6587\u4EF6\u7684\u5177\u4F53\u914D\u7F6E</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Override</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">boolean</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">preHandle</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">HttpServletRequest request</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> HttpServletResponse response</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> Object object</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> throws Exception </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">OPTIONS</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">.</span><span style="color:#80A665;">equals</span><span style="color:#666666;">(</span><span style="color:#BD976A;">request</span><span style="color:#666666;">.</span><span style="color:#80A665;">getMethod</span><span style="color:#666666;">()))</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#CB7676;">!</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">object </span><span style="color:#CB7676;">instanceof</span><span style="color:#DBD7CAEE;"> HandlerMethod</span><span style="color:#666666;">))</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    HandlerMethod</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">handlerMethod</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">HandlerMethod</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> object</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    Method</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">method</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">handlerMethod</span><span style="color:#666666;">.</span><span style="color:#80A665;">getMethod</span><span style="color:#666666;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u83B7\u53D6\u8BF7\u6C42\u7528\u6237id</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">userId</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">null</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">try</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      userId </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">StpUtil</span><span style="color:#666666;">.</span><span style="color:#80A665;">getLoginIdAsString</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">catch</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">Exception </span><span style="color:#BD976A;">e</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">      </span><span style="color:#758575DD;">// \u83B7\u53D6\u7528\u6237id\u5931\u8D25\uFF0C\u5C01\u88C5\u9519\u8BEF\u4FE1\u606F</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">message</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">e</span><span style="color:#666666;">.</span><span style="color:#80A665;">getMessage</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      Result</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">result</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">Result</span><span style="color:#666666;">.</span><span style="color:#80A665;">internalServerError</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">message</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#80A665;">error</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">response</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> result</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> e</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">false</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    ReqApi</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">reqApi</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">method</span><span style="color:#666666;">.</span><span style="color:#80A665;">getAnnotation</span><span style="color:#666666;">(</span><span style="color:#BD976A;">ReqApi</span><span style="color:#666666;">.</span><span style="color:#BD976A;">class</span><span style="color:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u6821\u9A8C</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    Result</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">result</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">loginuserService</span><span style="color:#666666;">.</span><span style="color:#80A665;">checkUser</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">userId</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> reqApi</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    HttpStatus</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">code</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">result</span><span style="color:#666666;">.</span><span style="color:#80A665;">getStatusCode</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">HttpStatus</span><span style="color:#666666;">.</span><span style="color:#BD976A;">OK</span><span style="color:#666666;">.</span><span style="color:#80A665;">equals</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">code</span><span style="color:#666666;">))</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">true</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">else</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#80A665;">error</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">response</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> result</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">null</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">false</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Override</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">boolean</span><span style="color:#393A34;"> </span><span style="color:#59873A;">preHandle</span><span style="color:#999999;">(</span><span style="color:#393A34;">HttpServletRequest request</span><span style="color:#999999;">,</span><span style="color:#393A34;"> HttpServletResponse response</span><span style="color:#999999;">,</span><span style="color:#393A34;"> Object object</span><span style="color:#999999;">)</span><span style="color:#393A34;"> throws Exception </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">OPTIONS</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">.</span><span style="color:#59873A;">equals</span><span style="color:#999999;">(</span><span style="color:#B07D48;">request</span><span style="color:#999999;">.</span><span style="color:#59873A;">getMethod</span><span style="color:#999999;">()))</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#AB5959;">!</span><span style="color:#999999;">(</span><span style="color:#393A34;">object </span><span style="color:#AB5959;">instanceof</span><span style="color:#393A34;"> HandlerMethod</span><span style="color:#999999;">))</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    HandlerMethod</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">handlerMethod</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#393A34;">HandlerMethod</span><span style="color:#999999;">)</span><span style="color:#393A34;"> object</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    Method</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">method</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">handlerMethod</span><span style="color:#999999;">.</span><span style="color:#59873A;">getMethod</span><span style="color:#999999;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u83B7\u53D6\u8BF7\u6C42\u7528\u6237id</span></span>
<span class="line"><span style="color:#393A34;">    String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">userId</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">null</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">try</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      userId </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">StpUtil</span><span style="color:#999999;">.</span><span style="color:#59873A;">getLoginIdAsString</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">catch</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#393A34;">Exception </span><span style="color:#B07D48;">e</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">      </span><span style="color:#A0ADA0;">// \u83B7\u53D6\u7528\u6237id\u5931\u8D25\uFF0C\u5C01\u88C5\u9519\u8BEF\u4FE1\u606F</span></span>
<span class="line"><span style="color:#393A34;">      String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">message</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">e</span><span style="color:#999999;">.</span><span style="color:#59873A;">getMessage</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">      Result</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">result</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Result</span><span style="color:#999999;">.</span><span style="color:#59873A;">internalServerError</span><span style="color:#999999;">(</span><span style="color:#393A34;">message</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#59873A;">error</span><span style="color:#999999;">(</span><span style="color:#393A34;">response</span><span style="color:#999999;">,</span><span style="color:#393A34;"> result</span><span style="color:#999999;">,</span><span style="color:#393A34;"> e</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">false</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    ReqApi</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">reqApi</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">method</span><span style="color:#999999;">.</span><span style="color:#59873A;">getAnnotation</span><span style="color:#999999;">(</span><span style="color:#B07D48;">ReqApi</span><span style="color:#999999;">.</span><span style="color:#B07D48;">class</span><span style="color:#999999;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u6821\u9A8C</span></span>
<span class="line"><span style="color:#393A34;">    Result</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">result</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">loginuserService</span><span style="color:#999999;">.</span><span style="color:#59873A;">checkUser</span><span style="color:#999999;">(</span><span style="color:#393A34;">userId</span><span style="color:#999999;">,</span><span style="color:#393A34;"> reqApi</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    HttpStatus</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">code</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">result</span><span style="color:#999999;">.</span><span style="color:#59873A;">getStatusCode</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">HttpStatus</span><span style="color:#999999;">.</span><span style="color:#B07D48;">OK</span><span style="color:#999999;">.</span><span style="color:#59873A;">equals</span><span style="color:#999999;">(</span><span style="color:#393A34;">code</span><span style="color:#999999;">))</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">true</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">else</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#59873A;">error</span><span style="color:#999999;">(</span><span style="color:#393A34;">response</span><span style="color:#999999;">,</span><span style="color:#393A34;"> result</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">null</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">false</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="\u8DE8\u57DF\u8BF7\u6C42\u914D\u7F6E" tabindex="-1">\u8DE8\u57DF\u8BF7\u6C42\u914D\u7F6E <a class="header-anchor" href="#\u8DE8\u57DF\u8BF7\u6C42\u914D\u7F6E" aria-hidden="true">#</a></h3><blockquote><p>\u7528\u4E8E\u8BBE\u7F6E\u8DE8\u57DF\u8D44\u6E90\u5171\u4EAB</p></blockquote><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#4D9375;">package</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">beneway</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">web</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">config</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">context</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Configuration</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">web</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">servlet</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">config</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">CorsRegistry</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">web</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">servlet</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">config</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">WebMvcConfigurer</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">@</span><span style="color:#CB7676;">Configuration</span></span>
<span class="line"><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">class</span><span style="color:#DBD7CAEE;"> </span><span style="color:#5DA9A7;">WebMvcConfig</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">implements</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">WebMvcConfigurer</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u8BBE\u7F6E\u8DE8\u57DF\u8BBF\u95EE</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Override</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">void</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">addCorsMappings</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">CorsRegistry </span><span style="color:#BD976A;">registry</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">registry</span><span style="color:#666666;">.</span><span style="color:#80A665;">addMapping</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">/**</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#666666;">                </span><span style="color:#758575DD;">// \u5141\u8BB8\u6240\u6709\u57DF\u540D\u8BBF\u95EE</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                </span><span style="color:#666666;">.</span><span style="color:#80A665;">allowedOrigins</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">*</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#666666;">                </span><span style="color:#758575DD;">// \u5141\u8BB8\u7684\u8BF7\u6C42\u65B9\u5F0F</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                </span><span style="color:#666666;">.</span><span style="color:#80A665;">allowedMethods</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">GET</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">HEAD</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">POST</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">PUT</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">PATCH</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">DELETE</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">OPTIONS</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">TRACE</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#666666;">                </span><span style="color:#758575DD;">// \u5141\u8BB8\u53D1\u9001Cookie</span></span>
<span class="line"><span style="color:#DBD7CAEE;">                </span><span style="color:#666666;">.</span><span style="color:#80A665;">allowCredentials</span><span style="color:#666666;">(</span><span style="color:#4D9375;">true</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#1E754F;">package</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">beneway</span><span style="color:#999999;">.</span><span style="color:#393A34;">web</span><span style="color:#999999;">.</span><span style="color:#393A34;">config</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">context</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">Configuration</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">web</span><span style="color:#999999;">.</span><span style="color:#393A34;">servlet</span><span style="color:#999999;">.</span><span style="color:#393A34;">config</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">CorsRegistry</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">web</span><span style="color:#999999;">.</span><span style="color:#393A34;">servlet</span><span style="color:#999999;">.</span><span style="color:#393A34;">config</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">WebMvcConfigurer</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">@</span><span style="color:#AB5959;">Configuration</span></span>
<span class="line"><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">class</span><span style="color:#393A34;"> </span><span style="color:#2E808F;">WebMvcConfig</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">implements</span><span style="color:#393A34;"> </span><span style="color:#59873A;">WebMvcConfigurer</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u8BBE\u7F6E\u8DE8\u57DF\u8BBF\u95EE</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Override</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">void</span><span style="color:#393A34;"> </span><span style="color:#59873A;">addCorsMappings</span><span style="color:#999999;">(</span><span style="color:#393A34;">CorsRegistry </span><span style="color:#B07D48;">registry</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">registry</span><span style="color:#999999;">.</span><span style="color:#59873A;">addMapping</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">/**</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#999999;">                </span><span style="color:#A0ADA0;">// \u5141\u8BB8\u6240\u6709\u57DF\u540D\u8BBF\u95EE</span></span>
<span class="line"><span style="color:#393A34;">                </span><span style="color:#999999;">.</span><span style="color:#59873A;">allowedOrigins</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">*</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#999999;">                </span><span style="color:#A0ADA0;">// \u5141\u8BB8\u7684\u8BF7\u6C42\u65B9\u5F0F</span></span>
<span class="line"><span style="color:#393A34;">                </span><span style="color:#999999;">.</span><span style="color:#59873A;">allowedMethods</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">GET</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">HEAD</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">POST</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">PUT</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">PATCH</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">DELETE</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">OPTIONS</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">TRACE</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#999999;">                </span><span style="color:#A0ADA0;">// \u5141\u8BB8\u53D1\u9001Cookie</span></span>
<span class="line"><span style="color:#393A34;">                </span><span style="color:#999999;">.</span><span style="color:#59873A;">allowCredentials</span><span style="color:#999999;">(</span><span style="color:#1E754F;">true</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="mybatis-plus-\u914D\u7F6E" tabindex="-1">MyBatis-Plus \u914D\u7F6E <a class="header-anchor" href="#mybatis-plus-\u914D\u7F6E" aria-hidden="true">#</a></h2><blockquote><p>\u7528\u4E8E\u914D\u7F6EMyBatis-Plus\u63D2\u4EF6\u3001\u6269\u5C55\u65B9\u6CD5\u7B49</p></blockquote><h3 id="\u5168\u5C40\u914D\u7F6E-1" tabindex="-1">\u5168\u5C40\u914D\u7F6E <a class="header-anchor" href="#\u5168\u5C40\u914D\u7F6E-1" aria-hidden="true">#</a></h3><p>MyBatis-Plus\u9ED8\u8BA4\u5168\u5C40\u914D\u7F6E\u5728 <a href="https://github.com/elonehoo/benewy-template/blob/main/project/basic/src/main/java/com/beneway/basic/config/MyBatisPlusConfig.java" target="_blank" rel="noreferrer">basic/config/MyBatisPlusConfig</a> \u5185\u914D\u7F6E</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#4D9375;">package</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">beneway</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">basic</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">config</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">baomidou</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">mybatisplus</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">DbType</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">baomidou</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">mybatisplus</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">extension</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">plugins</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">MybatisPlusInterceptor</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">baomidou</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">mybatisplus</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">extension</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">plugins</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">inner</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">PaginationInnerInterceptor</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">context</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Bean</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">context</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Configuration</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">@</span><span style="color:#CB7676;">Configuration</span></span>
<span class="line"><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">class</span><span style="color:#DBD7CAEE;"> </span><span style="color:#5DA9A7;">MyBatisPlusConfig</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">  /**</span></span>
<span class="line"><span style="color:#758575DD;">   * \u65B0\u7684\u5206\u9875\u63D2\u4EF6,\u4E00\u7F13\u548C\u4E8C\u7F13\u9075\u5FAAmybatis\u7684\u89C4\u5219,\u9700\u8981\u8BBE\u7F6E MybatisConfiguration#useDeprecatedExecutor = false \u907F\u514D\u7F13\u5B58\u51FA\u73B0\u95EE\u9898(\u8BE5\u5C5E\u6027\u4F1A\u5728\u65E7\u63D2\u4EF6\u79FB\u9664\u540E\u4E00\u540C\u79FB\u9664)</span></span>
<span class="line"><span style="color:#758575DD;">   */</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Bean</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> MybatisPlusInterceptor </span><span style="color:#80A665;">mybatisPlusInterceptor</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    MybatisPlusInterceptor</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">interceptor</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">MybatisPlusInterceptor</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">interceptor</span><span style="color:#666666;">.</span><span style="color:#80A665;">addInnerInterceptor</span><span style="color:#666666;">(</span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">PaginationInnerInterceptor</span><span style="color:#666666;">(</span><span style="color:#BD976A;">DbType</span><span style="color:#666666;">.</span><span style="color:#BD976A;">MYSQL</span><span style="color:#666666;">));</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> interceptor</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#1E754F;">package</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">beneway</span><span style="color:#999999;">.</span><span style="color:#393A34;">basic</span><span style="color:#999999;">.</span><span style="color:#393A34;">config</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">baomidou</span><span style="color:#999999;">.</span><span style="color:#393A34;">mybatisplus</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">DbType</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">baomidou</span><span style="color:#999999;">.</span><span style="color:#393A34;">mybatisplus</span><span style="color:#999999;">.</span><span style="color:#393A34;">extension</span><span style="color:#999999;">.</span><span style="color:#393A34;">plugins</span><span style="color:#999999;">.</span><span style="color:#393A34;">MybatisPlusInterceptor</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">baomidou</span><span style="color:#999999;">.</span><span style="color:#393A34;">mybatisplus</span><span style="color:#999999;">.</span><span style="color:#393A34;">extension</span><span style="color:#999999;">.</span><span style="color:#393A34;">plugins</span><span style="color:#999999;">.</span><span style="color:#393A34;">inner</span><span style="color:#999999;">.</span><span style="color:#393A34;">PaginationInnerInterceptor</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">context</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">Bean</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">context</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">Configuration</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">@</span><span style="color:#AB5959;">Configuration</span></span>
<span class="line"><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">class</span><span style="color:#393A34;"> </span><span style="color:#2E808F;">MyBatisPlusConfig</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">  /**</span></span>
<span class="line"><span style="color:#A0ADA0;">   * \u65B0\u7684\u5206\u9875\u63D2\u4EF6,\u4E00\u7F13\u548C\u4E8C\u7F13\u9075\u5FAAmybatis\u7684\u89C4\u5219,\u9700\u8981\u8BBE\u7F6E MybatisConfiguration#useDeprecatedExecutor = false \u907F\u514D\u7F13\u5B58\u51FA\u73B0\u95EE\u9898(\u8BE5\u5C5E\u6027\u4F1A\u5728\u65E7\u63D2\u4EF6\u79FB\u9664\u540E\u4E00\u540C\u79FB\u9664)</span></span>
<span class="line"><span style="color:#A0ADA0;">   */</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Bean</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> MybatisPlusInterceptor </span><span style="color:#59873A;">mybatisPlusInterceptor</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    MybatisPlusInterceptor</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">interceptor</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">MybatisPlusInterceptor</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">interceptor</span><span style="color:#999999;">.</span><span style="color:#59873A;">addInnerInterceptor</span><span style="color:#999999;">(</span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">PaginationInnerInterceptor</span><span style="color:#999999;">(</span><span style="color:#B07D48;">DbType</span><span style="color:#999999;">.</span><span style="color:#B07D48;">MYSQL</span><span style="color:#999999;">));</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> interceptor</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="\u6269\u5C55\u65B9\u6CD5" tabindex="-1">\u6269\u5C55\u65B9\u6CD5 <a class="header-anchor" href="#\u6269\u5C55\u65B9\u6CD5" aria-hidden="true">#</a></h3><blockquote><p>\u7528\u4E8E\u6269\u5C55 MyBatis-Plus \u9ED8\u8BA4\u63D0\u4F9B\u7684\u65B9\u6CD5\uFF0C\u4E30\u5BCC IService \u63A5\u53E3\u3002</p><p>\u6269\u5C55\u6587\u4EF6\u4F4D\u4E8E\u9879\u76EE\u6839\u9879\u76EE\u4E0B <a href="https://github.com/elonehoo/benewy-template/blob/main/project/basic/src/main/java/com/beneway/basic/mybatisplus/MyIService.java" target="_blank" rel="noreferrer">basic/mybatisplus/MyIService</a></p></blockquote><div class="warning custom-block"><p class="custom-block-title">\u6CE8\u610F</p><p>\u6240\u6709\u65B0\u521B\u5EFA\u7684 Service \u63A5\u53E3\u9700\u7EE7\u627F MyIService \u63A5\u53E3\u5373\u53EF\u4F7F\u7528\u6269\u5C55\u7684\u65B9\u6CD5</p></div><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#758575DD;">// \u7EE7\u627F\u4E8EMyBatis-Plus\u7684IService\u63A5\u53E3</span></span>
<span class="line"><span style="color:#4D9375;">package</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">beneway</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">basic</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">mybatisplus</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">baomidou</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">mybatisplus</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">core</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">conditions</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Wrapper</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">baomidou</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">mybatisplus</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">extension</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">service</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">IService</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">interface</span><span style="color:#DBD7CAEE;"> </span><span style="color:#5DA9A7;">MyIService</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">T</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">extends</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">IService</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">T</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">default</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">boolean</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">isExist</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">Wrapper</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">T</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">queryWrapper</span><span style="color:#666666;">){</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">count</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">queryWrapper</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// \u7EE7\u627F\u4E8EMyBatis-Plus\u7684IService\u63A5\u53E3</span></span>
<span class="line"><span style="color:#1E754F;">package</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">beneway</span><span style="color:#999999;">.</span><span style="color:#393A34;">basic</span><span style="color:#999999;">.</span><span style="color:#393A34;">mybatisplus</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">baomidou</span><span style="color:#999999;">.</span><span style="color:#393A34;">mybatisplus</span><span style="color:#999999;">.</span><span style="color:#393A34;">core</span><span style="color:#999999;">.</span><span style="color:#393A34;">conditions</span><span style="color:#999999;">.</span><span style="color:#393A34;">Wrapper</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">baomidou</span><span style="color:#999999;">.</span><span style="color:#393A34;">mybatisplus</span><span style="color:#999999;">.</span><span style="color:#393A34;">extension</span><span style="color:#999999;">.</span><span style="color:#393A34;">service</span><span style="color:#999999;">.</span><span style="color:#393A34;">IService</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">interface</span><span style="color:#393A34;"> </span><span style="color:#2E808F;">MyIService</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">T</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">extends</span><span style="color:#393A34;"> </span><span style="color:#59873A;">IService</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">T</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">default</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">boolean</span><span style="color:#393A34;"> </span><span style="color:#59873A;">isExist</span><span style="color:#999999;">(</span><span style="color:#393A34;">Wrapper</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">T</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">queryWrapper</span><span style="color:#999999;">){</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#59873A;">count</span><span style="color:#999999;">(</span><span style="color:#393A34;">queryWrapper</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="redis\u914D\u7F6E" tabindex="-1">Redis\u914D\u7F6E <a class="header-anchor" href="#redis\u914D\u7F6E" aria-hidden="true">#</a></h2><blockquote><p>Redis \u662F\u4E00\u4E2A\u9AD8\u6027\u80FD\u7684key-value\u6570\u636E\u5E93\uFF0C\u7528\u4E8E\u7F13\u5B58\u9879\u76EE\u4E2D\u9AD8\u9891\u8BF7\u6C42\u6570\u636E\uFF0C\u51CF\u5C0F\u540E\u53F0\u6570\u636E\u5E93\u538B\u529B\u3002\u540C\u65F6\u4E5F\u80FD\u4E3A\u5176\u4ED6\u5DF2\u63A5\u5165\u7684\u6846\u67B6\u63D0\u4F9B\u7F13\u5B58\u529F\u80FD</p></blockquote><p>Redis \u76F8\u5173\u914D\u7F6E\u5C5E\u6027\u79FB\u6B65 <a href="./settings.html#application-dev-yml">application-dev.yml</a> \u67E5\u770B\u8BE6\u60C5</p><div class="warning custom-block"><p class="custom-block-title">\u6CE8\u610F</p><p>\u82E5\u8981\u4F7F\u7528 Redis \u7684\u7F13\u5B58\u529F\u80FD\uFF0C\u9700\u8981\u5728\u4E3B\u5165\u53E3\uFF08<a href="https://github.com/elonehoo/benewy-template/blob/main/project/core/src/main/java/com/beneway/core/Core.java" target="_blank" rel="noreferrer">Core</a>\uFF09\u4E0A\u52A0\u4E0A<code>@EnableCaching</code> \u6CE8\u89E3\uFF0C\u5373\u53EF\u5F00\u542F\u7F13\u5B58\u529F\u80FD</p></div><h3 id="\u521D\u59CB\u5316-redis-\u914D\u7F6E" tabindex="-1">\u521D\u59CB\u5316 Redis \u914D\u7F6E <a class="header-anchor" href="#\u521D\u59CB\u5316-redis-\u914D\u7F6E" aria-hidden="true">#</a></h3><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#4D9375;">package</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">beneway</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">basic</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">config</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">context</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Bean</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">context</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Configuration</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">data</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">redis</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">connection</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">RedisConnectionFactory</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">data</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">redis</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">core</span><span style="color:#666666;">.</span><span style="color:#C99076;">*</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">data</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">redis</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">serializer</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">JdkSerializationRedisSerializer</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">data</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">redis</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">serializer</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">StringRedisSerializer</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> javax</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Resource</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">/**</span></span>
<span class="line"><span style="color:#758575DD;"> * Redis\u914D\u7F6E</span></span>
<span class="line"><span style="color:#758575DD;"> *</span></span>
<span class="line"><span style="color:#758575DD;"> * </span><span style="color:#4D9375;">@author</span><span style="color:#758575DD;"> Mark sunlightcs@gmail.com</span></span>
<span class="line"><span style="color:#758575DD;"> */</span></span>
<span class="line"><span style="color:#666666;">@</span><span style="color:#CB7676;">Configuration</span></span>
<span class="line"><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">class</span><span style="color:#DBD7CAEE;"> </span><span style="color:#5DA9A7;">RedisConfig</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Resource</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">private</span><span style="color:#DBD7CAEE;"> RedisConnectionFactory</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">factory</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Bean</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> RedisTemplate</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">String</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">Object</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">redisTemplate</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        RedisTemplate</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">String</span><span style="color:#666666;">,</span><span style="color:#C99076;"> </span><span style="color:#CB7676;">Object</span><span style="color:#666666;">&gt;</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">redisTemplate</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> RedisTemplate</span><span style="color:#666666;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">// \u4F7F\u7528StringRedisSerializer\u8FDB\u884C\u5E8F\u5217\u5316\uFF0C\u53EA\u80FD\u5B58\u50A8\u7C7B\u578B\u4E3AString\u7684Key</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">redisTemplate</span><span style="color:#666666;">.</span><span style="color:#80A665;">setKeySerializer</span><span style="color:#666666;">(</span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">StringRedisSerializer</span><span style="color:#666666;">());</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">// \u53EA\u80FD\u5B58\u50A8\u7C7B\u578B\u4E3AString\u7684HashKey</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">redisTemplate</span><span style="color:#666666;">.</span><span style="color:#80A665;">setHashKeySerializer</span><span style="color:#666666;">(</span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">StringRedisSerializer</span><span style="color:#666666;">());</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">// \u53EA\u80FD\u5B58\u50A8\u7C7B\u578B\u4E3AString\u7684HashValue</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">redisTemplate</span><span style="color:#666666;">.</span><span style="color:#80A665;">setHashValueSerializer</span><span style="color:#666666;">(</span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">StringRedisSerializer</span><span style="color:#666666;">());</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">// \u4F7F\u7528JdkSerializationRedisSerializer\u8FDB\u884C\u5E8F\u5217\u5316\uFF0C\u53EA\u80FD\u5B58\u50A8Jdk\u5E8F\u5217\u5316\u7684value</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">redisTemplate</span><span style="color:#666666;">.</span><span style="color:#80A665;">setValueSerializer</span><span style="color:#666666;">(</span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">JdkSerializationRedisSerializer</span><span style="color:#666666;">());</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">redisTemplate</span><span style="color:#666666;">.</span><span style="color:#80A665;">setConnectionFactory</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">factory</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> redisTemplate</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Bean</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> HashOperations</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">String</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">String</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">Object</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">hashOperations</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">RedisTemplate</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">String</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">Object</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">redisTemplate</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">redisTemplate</span><span style="color:#666666;">.</span><span style="color:#80A665;">opsForHash</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Bean</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> ValueOperations</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">String</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">String</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">valueOperations</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">RedisTemplate</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">String</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">String</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">redisTemplate</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">redisTemplate</span><span style="color:#666666;">.</span><span style="color:#80A665;">opsForValue</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Bean</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> ListOperations</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">String</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">Object</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">listOperations</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">RedisTemplate</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">String</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">Object</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">redisTemplate</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">redisTemplate</span><span style="color:#666666;">.</span><span style="color:#80A665;">opsForList</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Bean</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> SetOperations</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">String</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">Object</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">setOperations</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">RedisTemplate</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">String</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">Object</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">redisTemplate</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">redisTemplate</span><span style="color:#666666;">.</span><span style="color:#80A665;">opsForSet</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Bean</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> ZSetOperations</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">String</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">Object</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">zSetOperations</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">RedisTemplate</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">String</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">Object</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">redisTemplate</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">redisTemplate</span><span style="color:#666666;">.</span><span style="color:#80A665;">opsForZSet</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#1E754F;">package</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">beneway</span><span style="color:#999999;">.</span><span style="color:#393A34;">basic</span><span style="color:#999999;">.</span><span style="color:#393A34;">config</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">context</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">Bean</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">context</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">Configuration</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">data</span><span style="color:#999999;">.</span><span style="color:#393A34;">redis</span><span style="color:#999999;">.</span><span style="color:#393A34;">connection</span><span style="color:#999999;">.</span><span style="color:#393A34;">RedisConnectionFactory</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">data</span><span style="color:#999999;">.</span><span style="color:#393A34;">redis</span><span style="color:#999999;">.</span><span style="color:#393A34;">core</span><span style="color:#999999;">.</span><span style="color:#A65E2B;">*</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">data</span><span style="color:#999999;">.</span><span style="color:#393A34;">redis</span><span style="color:#999999;">.</span><span style="color:#393A34;">serializer</span><span style="color:#999999;">.</span><span style="color:#393A34;">JdkSerializationRedisSerializer</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">data</span><span style="color:#999999;">.</span><span style="color:#393A34;">redis</span><span style="color:#999999;">.</span><span style="color:#393A34;">serializer</span><span style="color:#999999;">.</span><span style="color:#393A34;">StringRedisSerializer</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> javax</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">Resource</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">/**</span></span>
<span class="line"><span style="color:#A0ADA0;"> * Redis\u914D\u7F6E</span></span>
<span class="line"><span style="color:#A0ADA0;"> *</span></span>
<span class="line"><span style="color:#A0ADA0;"> * </span><span style="color:#1E754F;">@author</span><span style="color:#A0ADA0;"> Mark sunlightcs@gmail.com</span></span>
<span class="line"><span style="color:#A0ADA0;"> */</span></span>
<span class="line"><span style="color:#999999;">@</span><span style="color:#AB5959;">Configuration</span></span>
<span class="line"><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">class</span><span style="color:#393A34;"> </span><span style="color:#2E808F;">RedisConfig</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Resource</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">private</span><span style="color:#393A34;"> RedisConnectionFactory</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">factory</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Bean</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> RedisTemplate</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">String</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">Object</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#59873A;">redisTemplate</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        RedisTemplate</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">String</span><span style="color:#999999;">,</span><span style="color:#A65E2B;"> </span><span style="color:#AB5959;">Object</span><span style="color:#999999;">&gt;</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">redisTemplate</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> RedisTemplate</span><span style="color:#999999;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">// \u4F7F\u7528StringRedisSerializer\u8FDB\u884C\u5E8F\u5217\u5316\uFF0C\u53EA\u80FD\u5B58\u50A8\u7C7B\u578B\u4E3AString\u7684Key</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">redisTemplate</span><span style="color:#999999;">.</span><span style="color:#59873A;">setKeySerializer</span><span style="color:#999999;">(</span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">StringRedisSerializer</span><span style="color:#999999;">());</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">// \u53EA\u80FD\u5B58\u50A8\u7C7B\u578B\u4E3AString\u7684HashKey</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">redisTemplate</span><span style="color:#999999;">.</span><span style="color:#59873A;">setHashKeySerializer</span><span style="color:#999999;">(</span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">StringRedisSerializer</span><span style="color:#999999;">());</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">// \u53EA\u80FD\u5B58\u50A8\u7C7B\u578B\u4E3AString\u7684HashValue</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">redisTemplate</span><span style="color:#999999;">.</span><span style="color:#59873A;">setHashValueSerializer</span><span style="color:#999999;">(</span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">StringRedisSerializer</span><span style="color:#999999;">());</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">// \u4F7F\u7528JdkSerializationRedisSerializer\u8FDB\u884C\u5E8F\u5217\u5316\uFF0C\u53EA\u80FD\u5B58\u50A8Jdk\u5E8F\u5217\u5316\u7684value</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">redisTemplate</span><span style="color:#999999;">.</span><span style="color:#59873A;">setValueSerializer</span><span style="color:#999999;">(</span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">JdkSerializationRedisSerializer</span><span style="color:#999999;">());</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">redisTemplate</span><span style="color:#999999;">.</span><span style="color:#59873A;">setConnectionFactory</span><span style="color:#999999;">(</span><span style="color:#393A34;">factory</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> redisTemplate</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Bean</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> HashOperations</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">String</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">String</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">Object</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#59873A;">hashOperations</span><span style="color:#999999;">(</span><span style="color:#393A34;">RedisTemplate</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">String</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">Object</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">redisTemplate</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">redisTemplate</span><span style="color:#999999;">.</span><span style="color:#59873A;">opsForHash</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Bean</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> ValueOperations</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">String</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">String</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#59873A;">valueOperations</span><span style="color:#999999;">(</span><span style="color:#393A34;">RedisTemplate</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">String</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">String</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">redisTemplate</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">redisTemplate</span><span style="color:#999999;">.</span><span style="color:#59873A;">opsForValue</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Bean</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> ListOperations</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">String</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">Object</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#59873A;">listOperations</span><span style="color:#999999;">(</span><span style="color:#393A34;">RedisTemplate</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">String</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">Object</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">redisTemplate</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">redisTemplate</span><span style="color:#999999;">.</span><span style="color:#59873A;">opsForList</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Bean</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> SetOperations</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">String</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">Object</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#59873A;">setOperations</span><span style="color:#999999;">(</span><span style="color:#393A34;">RedisTemplate</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">String</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">Object</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">redisTemplate</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">redisTemplate</span><span style="color:#999999;">.</span><span style="color:#59873A;">opsForSet</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Bean</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> ZSetOperations</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">String</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">Object</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#59873A;">zSetOperations</span><span style="color:#999999;">(</span><span style="color:#393A34;">RedisTemplate</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">String</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">Object</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">redisTemplate</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">redisTemplate</span><span style="color:#999999;">.</span><span style="color:#59873A;">opsForZSet</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="sa-token\u914D\u7F6E" tabindex="-1">Sa-Token\u914D\u7F6E <a class="header-anchor" href="#sa-token\u914D\u7F6E" aria-hidden="true">#</a></h2><p>Sa-Token \u7684\u5168\u5C40\u914D\u7F6E\u9879\u8BF7\u79FB\u6B65 <a href="./settings.html#application-dev-yml">application-dev.yml</a>\u3001<a href="./settings.html#application-basic-yml">application-basic.yml</a> \u67E5\u770B\u8BE6\u60C5</p><blockquote><p>\u5173\u4E8E Sa-Token \u7684\u66F4\u591A\u914D\u7F6E\uFF0C\u53EF\u67E5\u770B<a href="https://sa-token.dev33.cn/doc.html#/use/config?id=%e6%89%80%e6%9c%89%e5%8f%af%e9%85%8d%e7%bd%ae%e9%a1%b9" target="_blank" rel="noreferrer">\u6B64\u5904</a></p></blockquote><h2 id="\u9489\u9489\u914D\u7F6E" tabindex="-1">\u9489\u9489\u914D\u7F6E <a class="header-anchor" href="#\u9489\u9489\u914D\u7F6E" aria-hidden="true">#</a></h2><p>\u653F\u52A1\u9489\u9489\u7684\u5168\u5C40\u914D\u7F6E\u9879\u8BF7\u79FB\u6B65 <a href="./settings.html#application-basic-dev-yml">application-basic-dev.yml</a> \u67E5\u770B\u8BE6\u60C5</p><h3 id="\u521D\u59CB\u5316\u6570\u636E" tabindex="-1">\u521D\u59CB\u5316\u6570\u636E <a class="header-anchor" href="#\u521D\u59CB\u5316\u6570\u636E" aria-hidden="true">#</a></h3><p>\u521D\u59CB\u5316\u914D\u7F6E\u6587\u4EF6\u5B58\u5728\u4E8E\u9879\u76EE\u6839\u76EE\u5F55\u4E0B <a href="https://github.com/elonehoo/benewy-template/blob/main/project/basic/src/main/java/com/beneway/basic/utils/dd/StartService.java" target="_blank" rel="noreferrer">StartService</a></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#4D9375;">package</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">beneway</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">basic</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">utils</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">dd</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> lombok</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">extern</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">slf4j</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Slf4j</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">boot</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">ApplicationArguments</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">boot</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">ApplicationRunner</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">stereotype</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Component</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> javax</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Resource</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">/**</span></span>
<span class="line"><span style="color:#758575DD;"> * \u670D\u52A1\u542F\u52A8\u65F6\u6267\u884C\u7684\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#758575DD;"> */</span></span>
<span class="line"><span style="color:#666666;">@</span><span style="color:#CB7676;">Slf4j</span></span>
<span class="line"><span style="color:#666666;">@</span><span style="color:#CB7676;">Component</span></span>
<span class="line"><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">class</span><span style="color:#DBD7CAEE;"> </span><span style="color:#5DA9A7;">StartService</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">implements</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">ApplicationRunner</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Resource</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">private</span><span style="color:#DBD7CAEE;"> ZWDDQrcodeUtils</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">zwddQrcodeUtils</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Resource</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">private</span><span style="color:#DBD7CAEE;"> ZWDDPhoneUtils</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">zwddPhoneUtils</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">    /**</span></span>
<span class="line"><span style="color:#758575DD;">     * \u8FDB\u884C\u5C0F\u7A0B\u5E8Ftoken\u7684\u521D\u6B21\u83B7\u53D6</span></span>
<span class="line"><span style="color:#758575DD;">     */</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Override</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">void</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">run</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">ApplicationArguments </span><span style="color:#BD976A;">args</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">// \u5237\u65B0\u653F\u52A1\u9489\u9489\u4E8C\u7EF4\u7801\u7684Token\u5C5E\u6027\u503C</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">zwddQrcodeUtils</span><span style="color:#666666;">.</span><span style="color:#80A665;">flushToken</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">// \u5237\u65B0\u653F\u52A1\u9489\u9489\u7535\u8BDD\u7684Token\u5C5E\u6027\u503C</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">zwddPhoneUtils</span><span style="color:#666666;">.</span><span style="color:#80A665;">flushToken</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#1E754F;">package</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">beneway</span><span style="color:#999999;">.</span><span style="color:#393A34;">basic</span><span style="color:#999999;">.</span><span style="color:#393A34;">utils</span><span style="color:#999999;">.</span><span style="color:#393A34;">dd</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> lombok</span><span style="color:#999999;">.</span><span style="color:#393A34;">extern</span><span style="color:#999999;">.</span><span style="color:#393A34;">slf4j</span><span style="color:#999999;">.</span><span style="color:#393A34;">Slf4j</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">boot</span><span style="color:#999999;">.</span><span style="color:#393A34;">ApplicationArguments</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">boot</span><span style="color:#999999;">.</span><span style="color:#393A34;">ApplicationRunner</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">stereotype</span><span style="color:#999999;">.</span><span style="color:#393A34;">Component</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> javax</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">Resource</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">/**</span></span>
<span class="line"><span style="color:#A0ADA0;"> * \u670D\u52A1\u542F\u52A8\u65F6\u6267\u884C\u7684\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#A0ADA0;"> */</span></span>
<span class="line"><span style="color:#999999;">@</span><span style="color:#AB5959;">Slf4j</span></span>
<span class="line"><span style="color:#999999;">@</span><span style="color:#AB5959;">Component</span></span>
<span class="line"><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">class</span><span style="color:#393A34;"> </span><span style="color:#2E808F;">StartService</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">implements</span><span style="color:#393A34;"> </span><span style="color:#59873A;">ApplicationRunner</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Resource</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">private</span><span style="color:#393A34;"> ZWDDQrcodeUtils</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">zwddQrcodeUtils</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Resource</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">private</span><span style="color:#393A34;"> ZWDDPhoneUtils</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">zwddPhoneUtils</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">    /**</span></span>
<span class="line"><span style="color:#A0ADA0;">     * \u8FDB\u884C\u5C0F\u7A0B\u5E8Ftoken\u7684\u521D\u6B21\u83B7\u53D6</span></span>
<span class="line"><span style="color:#A0ADA0;">     */</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Override</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">void</span><span style="color:#393A34;"> </span><span style="color:#59873A;">run</span><span style="color:#999999;">(</span><span style="color:#393A34;">ApplicationArguments </span><span style="color:#B07D48;">args</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">// \u5237\u65B0\u653F\u52A1\u9489\u9489\u4E8C\u7EF4\u7801\u7684Token\u5C5E\u6027\u503C</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">zwddQrcodeUtils</span><span style="color:#999999;">.</span><span style="color:#59873A;">flushToken</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">// \u5237\u65B0\u653F\u52A1\u9489\u9489\u7535\u8BDD\u7684Token\u5C5E\u6027\u503C</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">zwddPhoneUtils</span><span style="color:#999999;">.</span><span style="color:#59873A;">flushToken</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="druid-\u76D1\u63A7\u914D\u7F6E" tabindex="-1">Druid \u76D1\u63A7\u914D\u7F6E <a class="header-anchor" href="#druid-\u76D1\u63A7\u914D\u7F6E" aria-hidden="true">#</a></h2><p>Druid \u76F8\u5173\u76D1\u63A7\u914D\u7F6E\u5C5E\u6027\u79FB\u6B65 <a href="./settings.html#application-basic-dev-yml">application-dev.yml</a> \u67E5\u770B <code>spring.datasource.druid.stat-view-servlet</code></p><blockquote><p>\u7528\u4E8E\u76D1\u63A7\u6570\u636E\u5E93\u8BBF\u95EE\u6027\u80FD\uFF0C\u8BE6\u7EC6\u7EDF\u8BA1SQL\u7684\u6267\u884C\u6027\u80FD\uFF0C\u7EBF\u4E0A\u5206\u6790\u6570\u636E\u5E93\u8BBF\u95EE\u6027\u80FD</p></blockquote><h3 id="\u521D\u59CB\u5316-web-\u76D1\u63A7-filter" tabindex="-1">\u521D\u59CB\u5316 Web \u76D1\u63A7 Filter <a class="header-anchor" href="#\u521D\u59CB\u5316-web-\u76D1\u63A7-filter" aria-hidden="true">#</a></h3><p>\u76D1\u63A7\u914D\u7F6E\u6587\u4EF6\u5B58\u5728\u4E8E\u9879\u76EE\u6839\u76EE\u5F55\u4E0B <a href="https://github.com/elonehoo/benewy-template/blob/main/project/web/src/main/java/com/beneway/web/config/DruidConfig.java" target="_blank" rel="noreferrer">DruidConfig</a></p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#4D9375;">package</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">beneway</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">web</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">config</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">alibaba</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">druid</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">support</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">http</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">WebStatFilter</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">boot</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">web</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">servlet</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">FilterRegistrationBean</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">context</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Bean</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">context</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Configuration</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> java</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">util</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Arrays</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> java</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">util</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">HashMap</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> java</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">util</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Map</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">/**</span></span>
<span class="line"><span style="color:#758575DD;"> * </span><span style="color:#4D9375;">@author</span><span style="color:#758575DD;"> zhy</span></span>
<span class="line"><span style="color:#758575DD;"> * @create_date 2019-01-26 20:18</span></span>
<span class="line"><span style="color:#758575DD;"> */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">@</span><span style="color:#CB7676;">Configuration</span></span>
<span class="line"><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">class</span><span style="color:#DBD7CAEE;"> </span><span style="color:#5DA9A7;">DruidConfig</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//2\u3001\u914D\u7F6E\u4E00\u4E2Aweb\u76D1\u63A7\u7684filter</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Bean</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> FilterRegistrationBean </span><span style="color:#80A665;">webStatFilter</span><span style="color:#666666;">(){</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        FilterRegistrationBean</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">bean</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">FilterRegistrationBean</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">bean</span><span style="color:#666666;">.</span><span style="color:#80A665;">setFilter</span><span style="color:#666666;">(</span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">WebStatFilter</span><span style="color:#666666;">());</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        Map</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">String</span><span style="color:#666666;">,</span><span style="color:#CB7676;">String</span><span style="color:#666666;">&gt;</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">initParams</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> HashMap</span><span style="color:#666666;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#666666;">        </span><span style="color:#758575DD;">// \u6392\u9664\u9759\u6001\u8D44\u6E90\u8BF7\u6C42\u76D1\u63A7</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">initParams</span><span style="color:#666666;">.</span><span style="color:#80A665;">put</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">exclusions</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">,</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">*.js,*.css,/druid/*</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">bean</span><span style="color:#666666;">.</span><span style="color:#80A665;">setInitParameters</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">initParams</span><span style="color:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#BD976A;">bean</span><span style="color:#666666;">.</span><span style="color:#80A665;">setUrlPatterns</span><span style="color:#666666;">(</span><span style="color:#BD976A;">Arrays</span><span style="color:#666666;">.</span><span style="color:#80A665;">asList</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">/</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">));</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> bean</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#1E754F;">package</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">beneway</span><span style="color:#999999;">.</span><span style="color:#393A34;">web</span><span style="color:#999999;">.</span><span style="color:#393A34;">config</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">alibaba</span><span style="color:#999999;">.</span><span style="color:#393A34;">druid</span><span style="color:#999999;">.</span><span style="color:#393A34;">support</span><span style="color:#999999;">.</span><span style="color:#393A34;">http</span><span style="color:#999999;">.</span><span style="color:#393A34;">WebStatFilter</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">boot</span><span style="color:#999999;">.</span><span style="color:#393A34;">web</span><span style="color:#999999;">.</span><span style="color:#393A34;">servlet</span><span style="color:#999999;">.</span><span style="color:#393A34;">FilterRegistrationBean</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">context</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">Bean</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">context</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">Configuration</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> java</span><span style="color:#999999;">.</span><span style="color:#393A34;">util</span><span style="color:#999999;">.</span><span style="color:#393A34;">Arrays</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> java</span><span style="color:#999999;">.</span><span style="color:#393A34;">util</span><span style="color:#999999;">.</span><span style="color:#393A34;">HashMap</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> java</span><span style="color:#999999;">.</span><span style="color:#393A34;">util</span><span style="color:#999999;">.</span><span style="color:#393A34;">Map</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">/**</span></span>
<span class="line"><span style="color:#A0ADA0;"> * </span><span style="color:#1E754F;">@author</span><span style="color:#A0ADA0;"> zhy</span></span>
<span class="line"><span style="color:#A0ADA0;"> * @create_date 2019-01-26 20:18</span></span>
<span class="line"><span style="color:#A0ADA0;"> */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">@</span><span style="color:#AB5959;">Configuration</span></span>
<span class="line"><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">class</span><span style="color:#393A34;"> </span><span style="color:#2E808F;">DruidConfig</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//2\u3001\u914D\u7F6E\u4E00\u4E2Aweb\u76D1\u63A7\u7684filter</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Bean</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> FilterRegistrationBean </span><span style="color:#59873A;">webStatFilter</span><span style="color:#999999;">(){</span></span>
<span class="line"><span style="color:#393A34;">        FilterRegistrationBean</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">bean</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">FilterRegistrationBean</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">bean</span><span style="color:#999999;">.</span><span style="color:#59873A;">setFilter</span><span style="color:#999999;">(</span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">WebStatFilter</span><span style="color:#999999;">());</span></span>
<span class="line"><span style="color:#393A34;">        Map</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">String</span><span style="color:#999999;">,</span><span style="color:#AB5959;">String</span><span style="color:#999999;">&gt;</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">initParams</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> HashMap</span><span style="color:#999999;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#999999;">        </span><span style="color:#A0ADA0;">// \u6392\u9664\u9759\u6001\u8D44\u6E90\u8BF7\u6C42\u76D1\u63A7</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">initParams</span><span style="color:#999999;">.</span><span style="color:#59873A;">put</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">exclusions</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">,</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">*.js,*.css,/druid/*</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">bean</span><span style="color:#999999;">.</span><span style="color:#59873A;">setInitParameters</span><span style="color:#999999;">(</span><span style="color:#393A34;">initParams</span><span style="color:#999999;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#B07D48;">bean</span><span style="color:#999999;">.</span><span style="color:#59873A;">setUrlPatterns</span><span style="color:#999999;">(</span><span style="color:#B07D48;">Arrays</span><span style="color:#999999;">.</span><span style="color:#59873A;">asList</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">/</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">));</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> bean</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div>`,67),e=[o];function t(c,r,y,A,D,i){return a(),n("div",null,e)}const C=s(p,[["render",t]]);export{B as __pageData,C as default};
