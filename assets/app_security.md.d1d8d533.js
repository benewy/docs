import{_ as s,c as n,o as a,b as l}from"./app.c2134f6f.js";const B=JSON.parse('{"title":"\u5B89\u5168\u9632\u62A4","description":"","frontmatter":{"outline":"deep"},"headers":[{"level":2,"title":"Xss \u5B89\u5168\u9632\u62A4\u914D\u7F6E","slug":"xss-\u5B89\u5168\u9632\u62A4\u914D\u7F6E","link":"#xss-\u5B89\u5168\u9632\u62A4\u914D\u7F6E","children":[{"level":3,"title":"Xss \u5305 /XssAndSqlHttpServletRequestWrapper","slug":"xss-\u5305-xssandsqlhttpservletrequestwrapper","link":"#xss-\u5305-xssandsqlhttpservletrequestwrapper","children":[]},{"level":3,"title":"Xss \u5305 /XssFilter","slug":"xss-\u5305-xssfilter","link":"#xss-\u5305-xssfilter","children":[]},{"level":3,"title":"Xss \u5305 /XssStringJsonSerializer","slug":"xss-\u5305-xssstringjsonserializer","link":"#xss-\u5305-xssstringjsonserializer","children":[]},{"level":3,"title":"WebMvcConfig","slug":"webmvcconfig","link":"#webmvcconfig","children":[]}]}],"relativePath":"app/security.md","lastUpdated":1668781900000}'),p={name:"app/security.md"},o=l(`<h1 id="\u5B89\u5168\u9632\u62A4" tabindex="-1">\u5B89\u5168\u9632\u62A4 <a class="header-anchor" href="#\u5B89\u5168\u9632\u62A4" aria-hidden="true">#</a></h1><h2 id="xss-\u5B89\u5168\u9632\u62A4\u914D\u7F6E" tabindex="-1">Xss \u5B89\u5168\u9632\u62A4\u914D\u7F6E <a class="header-anchor" href="#xss-\u5B89\u5168\u9632\u62A4\u914D\u7F6E" aria-hidden="true">#</a></h2><p>Xss \u914D\u7F6E\u6587\u4EF6\u5B58\u5728\u4E8E\u9879\u76EE\u6839\u76EE\u5F55\u4E0B <a href="https://github.com/elonehoo/benewy-template/tree/main/project/web/src/main/java/com/beneway/web/xss" target="_blank" rel="noreferrer">xss</a> \u5305\u5185\u53CA\u6587\u4EF6 <a href="https://github.com/elonehoo/benewy-template/blob/main/project/web/src/main/java/com/beneway/web/config/WebMvcConfig.java" target="_blank" rel="noreferrer">WebMvcConfig</a></p><h3 id="xss-\u5305-xssandsqlhttpservletrequestwrapper" tabindex="-1">Xss \u5305 <a href="https://github.com/elonehoo/benewy-template/tree/main/project/web/src/main/java/com/beneway/web/xss/XssAndSqlHttpServletRequestWrapper.java" target="_blank" rel="noreferrer">/XssAndSqlHttpServletRequestWrapper</a> <a class="header-anchor" href="#xss-\u5305-xssandsqlhttpservletrequestwrapper" aria-hidden="true">#</a></h3><blockquote><p>\u81EA\u5B9A\u4E49\u5305\u88C5\u7C7B\uFF0C\u4F5C\u7528\u4E3A\u5BF9\u6240\u8BF7\u6C42\u7684\u53C2\u6570\u8FDB\u884C Xss \u8FC7\u6EE4</p></blockquote><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#4D9375;">package</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">beneway</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">web</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">xss</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> cn</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">hutool</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">core</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">util</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">StrUtil</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> cn</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">hutool</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">http</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">HtmlUtil</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> javax</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">servlet</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">http</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">HttpServletRequest</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> javax</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">servlet</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">http</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">HttpServletRequestWrapper</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">/**</span></span>
<span class="line"><span style="color:#758575DD;"> *</span></span>
<span class="line"><span style="color:#758575DD;"> * @ClassName:  XssAndSqlHttpServletRequestWrapper</span></span>
<span class="line"><span style="color:#758575DD;"> * @Description:(xxsfileter \u5305\u88C5\u7C7B)</span></span>
<span class="line"><span style="color:#758575DD;"> *</span></span>
<span class="line"><span style="color:#758575DD;"> */</span></span>
<span class="line"><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">class</span><span style="color:#DBD7CAEE;"> </span><span style="color:#5DA9A7;">XssAndSqlHttpServletRequestWrapper</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">extends</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">HttpServletRequestWrapper</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">private</span><span style="color:#DBD7CAEE;"> HttpServletRequest</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">request</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">XssAndSqlHttpServletRequestWrapper</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">HttpServletRequest </span><span style="color:#BD976A;">request</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#C99076;">super</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">request</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#C99076;">this</span><span style="color:#666666;">.</span><span style="color:#BD976A;">request</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> request</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">    /**</span></span>
<span class="line"><span style="color:#758575DD;">     * \u5047\u5982\u6709\u6709html \u4EE3\u7801\u662F\u81EA\u5DF1\u4F20\u6765\u7684  \u9700\u8981\u8BBE\u5B9A\u5BF9\u5E94\u7684name \u4E0D\u8D70 HtmlUtil.escape(value) \u8FC7\u6EE4</span></span>
<span class="line"><span style="color:#758575DD;">     */</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Override</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> String </span><span style="color:#80A665;">getParameter</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">String </span><span style="color:#BD976A;">name</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">value</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">request</span><span style="color:#666666;">.</span><span style="color:#80A665;">getParameter</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">name</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#BD976A;">StrUtil</span><span style="color:#666666;">.</span><span style="color:#80A665;">isNotEmpty</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">value</span><span style="color:#666666;">))</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">            </span><span style="color:#758575DD;">// \u8F6C\u4E49\u6587\u672C\u4E2D\u7684HTML\u5B57\u7B26\u4E3A\u5B89\u5168\u7684\u5B57\u7B26</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            value </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">HtmlUtil</span><span style="color:#666666;">.</span><span style="color:#80A665;">escape</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">value</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> value</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Override</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">String</span><span style="color:#666666;">[]</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">getParameterValues</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">String </span><span style="color:#BD976A;">name</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#CB7676;">String</span><span style="color:#666666;">[]</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">parameterValues</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C99076;">super</span><span style="color:#666666;">.</span><span style="color:#80A665;">getParameterValues</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">name</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">parameterValues </span><span style="color:#CB7676;">==</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">null</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">null</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">for</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#CB7676;">int</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">i</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4C9A91;">0</span><span style="color:#666666;">;</span><span style="color:#DBD7CAEE;"> i </span><span style="color:#CB7676;">&lt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">parameterValues</span><span style="color:#666666;">.</span><span style="color:#BD976A;">length</span><span style="color:#666666;">;</span><span style="color:#DBD7CAEE;"> i</span><span style="color:#CB7676;">++</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">value</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> parameterValues</span><span style="color:#666666;">[</span><span style="color:#DBD7CAEE;">i</span><span style="color:#666666;">];</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> parameterValues</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#1E754F;">package</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">beneway</span><span style="color:#999999;">.</span><span style="color:#393A34;">web</span><span style="color:#999999;">.</span><span style="color:#393A34;">xss</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> cn</span><span style="color:#999999;">.</span><span style="color:#393A34;">hutool</span><span style="color:#999999;">.</span><span style="color:#393A34;">core</span><span style="color:#999999;">.</span><span style="color:#393A34;">util</span><span style="color:#999999;">.</span><span style="color:#393A34;">StrUtil</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> cn</span><span style="color:#999999;">.</span><span style="color:#393A34;">hutool</span><span style="color:#999999;">.</span><span style="color:#393A34;">http</span><span style="color:#999999;">.</span><span style="color:#393A34;">HtmlUtil</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> javax</span><span style="color:#999999;">.</span><span style="color:#393A34;">servlet</span><span style="color:#999999;">.</span><span style="color:#393A34;">http</span><span style="color:#999999;">.</span><span style="color:#393A34;">HttpServletRequest</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> javax</span><span style="color:#999999;">.</span><span style="color:#393A34;">servlet</span><span style="color:#999999;">.</span><span style="color:#393A34;">http</span><span style="color:#999999;">.</span><span style="color:#393A34;">HttpServletRequestWrapper</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">/**</span></span>
<span class="line"><span style="color:#A0ADA0;"> *</span></span>
<span class="line"><span style="color:#A0ADA0;"> * @ClassName:  XssAndSqlHttpServletRequestWrapper</span></span>
<span class="line"><span style="color:#A0ADA0;"> * @Description:(xxsfileter \u5305\u88C5\u7C7B)</span></span>
<span class="line"><span style="color:#A0ADA0;"> *</span></span>
<span class="line"><span style="color:#A0ADA0;"> */</span></span>
<span class="line"><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">class</span><span style="color:#393A34;"> </span><span style="color:#2E808F;">XssAndSqlHttpServletRequestWrapper</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">extends</span><span style="color:#393A34;"> </span><span style="color:#59873A;">HttpServletRequestWrapper</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">private</span><span style="color:#393A34;"> HttpServletRequest</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">request</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#59873A;">XssAndSqlHttpServletRequestWrapper</span><span style="color:#999999;">(</span><span style="color:#393A34;">HttpServletRequest </span><span style="color:#B07D48;">request</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#A65E2B;">super</span><span style="color:#999999;">(</span><span style="color:#393A34;">request</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#A65E2B;">this</span><span style="color:#999999;">.</span><span style="color:#B07D48;">request</span><span style="color:#393A34;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> request</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">    /**</span></span>
<span class="line"><span style="color:#A0ADA0;">     * \u5047\u5982\u6709\u6709html \u4EE3\u7801\u662F\u81EA\u5DF1\u4F20\u6765\u7684  \u9700\u8981\u8BBE\u5B9A\u5BF9\u5E94\u7684name \u4E0D\u8D70 HtmlUtil.escape(value) \u8FC7\u6EE4</span></span>
<span class="line"><span style="color:#A0ADA0;">     */</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Override</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> String </span><span style="color:#59873A;">getParameter</span><span style="color:#999999;">(</span><span style="color:#393A34;">String </span><span style="color:#B07D48;">name</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">value</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">request</span><span style="color:#999999;">.</span><span style="color:#59873A;">getParameter</span><span style="color:#999999;">(</span><span style="color:#393A34;">name</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#B07D48;">StrUtil</span><span style="color:#999999;">.</span><span style="color:#59873A;">isNotEmpty</span><span style="color:#999999;">(</span><span style="color:#393A34;">value</span><span style="color:#999999;">))</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">            </span><span style="color:#A0ADA0;">// \u8F6C\u4E49\u6587\u672C\u4E2D\u7684HTML\u5B57\u7B26\u4E3A\u5B89\u5168\u7684\u5B57\u7B26</span></span>
<span class="line"><span style="color:#393A34;">            value </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">HtmlUtil</span><span style="color:#999999;">.</span><span style="color:#59873A;">escape</span><span style="color:#999999;">(</span><span style="color:#393A34;">value</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> value</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Override</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">String</span><span style="color:#999999;">[]</span><span style="color:#393A34;"> </span><span style="color:#59873A;">getParameterValues</span><span style="color:#999999;">(</span><span style="color:#393A34;">String </span><span style="color:#B07D48;">name</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#AB5959;">String</span><span style="color:#999999;">[]</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">parameterValues</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">super</span><span style="color:#999999;">.</span><span style="color:#59873A;">getParameterValues</span><span style="color:#999999;">(</span><span style="color:#393A34;">name</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#393A34;">parameterValues </span><span style="color:#AB5959;">==</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">null</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">null</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">for</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#AB5959;">int</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">i</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#2F798A;">0</span><span style="color:#999999;">;</span><span style="color:#393A34;"> i </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">parameterValues</span><span style="color:#999999;">.</span><span style="color:#B07D48;">length</span><span style="color:#999999;">;</span><span style="color:#393A34;"> i</span><span style="color:#AB5959;">++</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">            String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">value</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> parameterValues</span><span style="color:#999999;">[</span><span style="color:#393A34;">i</span><span style="color:#999999;">];</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> parameterValues</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="xss-\u5305-xssfilter" tabindex="-1">Xss \u5305 <a href="https://github.com/elonehoo/benewy-template/tree/main/project/web/src/main/java/com/beneway/web/xss/XssFilter.java" target="_blank" rel="noreferrer">/XssFilter</a> <a class="header-anchor" href="#xss-\u5305-xssfilter" aria-hidden="true">#</a></h3><blockquote><p>\u5BF9\u8BF7\u6C42\u4F53\u4E2D\u7684\u6570\u636E\u8FDB\u884C\u8FC7\u6EE4\uFF0C\u5E76\u6CE8\u5165\u5BF9 Xss \u7684\u89E3\u6790\u5668</p></blockquote><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#4D9375;">package</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">beneway</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">web</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">xss</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">fasterxml</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">jackson</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">databind</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">ObjectMapper</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">fasterxml</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">jackson</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">databind</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">module</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">SimpleModule</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">context</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Bean</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">context</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Primary</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">http</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">converter</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">json</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Jackson2ObjectMapperBuilder</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> javax</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">servlet</span><span style="color:#666666;">.</span><span style="color:#C99076;">*</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> javax</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">servlet</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">http</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">HttpServletRequest</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> java</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">io</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">IOException</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">class</span><span style="color:#DBD7CAEE;"> </span><span style="color:#5DA9A7;">XssFilter</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">implements</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">Filter</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Override</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">void</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">destroy</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//  Auto-generated method stub</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Override</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">void</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">doFilter</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">ServletRequest </span><span style="color:#BD976A;">request</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> ServletResponse </span><span style="color:#BD976A;">response</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> FilterChain </span><span style="color:#BD976A;">chain</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">throws</span><span style="color:#DBD7CAEE;"> IOException</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> ServletException </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//  Auto-generated method stub</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    HttpServletRequest</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">req</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">HttpServletRequest</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> request</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    XssAndSqlHttpServletRequestWrapper</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">xssRequestWrapper</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">XssAndSqlHttpServletRequestWrapper</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">req</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#758575DD;">//        BodyReaderHttpServletRequestWrapper bodyReaderHttpServletRequestWrapper = new BodyReaderHttpServletRequestWrapper(xssRequestWrapper);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">chain</span><span style="color:#666666;">.</span><span style="color:#80A665;">doFilter</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">xssRequestWrapper</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> response</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Override</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">void</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">init</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">FilterConfig </span><span style="color:#BD976A;">arg0</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">throws</span><span style="color:#DBD7CAEE;"> ServletException </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">//  Auto-generated method stub</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Bean</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Primary</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> ObjectMapper </span><span style="color:#80A665;">xssObjectMapper</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">Jackson2ObjectMapperBuilder </span><span style="color:#BD976A;">builder</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u89E3\u6790\u5668</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    ObjectMapper</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">objectMapper</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">builder</span><span style="color:#666666;">.</span><span style="color:#80A665;">createXmlMapper</span><span style="color:#666666;">(</span><span style="color:#4D9375;">false</span><span style="color:#666666;">).</span><span style="color:#80A665;">build</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u6CE8\u518Cxss\u89E3\u6790\u5668</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    SimpleModule</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">xssModule</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">SimpleModule</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">XssStringJsonSerializer</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">xssModule</span><span style="color:#666666;">.</span><span style="color:#80A665;">addSerializer</span><span style="color:#666666;">(</span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">XssStringJsonSerializer</span><span style="color:#666666;">());</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">objectMapper</span><span style="color:#666666;">.</span><span style="color:#80A665;">registerModule</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">xssModule</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u8FD4\u56DE</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> objectMapper</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#1E754F;">package</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">beneway</span><span style="color:#999999;">.</span><span style="color:#393A34;">web</span><span style="color:#999999;">.</span><span style="color:#393A34;">xss</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">fasterxml</span><span style="color:#999999;">.</span><span style="color:#393A34;">jackson</span><span style="color:#999999;">.</span><span style="color:#393A34;">databind</span><span style="color:#999999;">.</span><span style="color:#393A34;">ObjectMapper</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">fasterxml</span><span style="color:#999999;">.</span><span style="color:#393A34;">jackson</span><span style="color:#999999;">.</span><span style="color:#393A34;">databind</span><span style="color:#999999;">.</span><span style="color:#393A34;">module</span><span style="color:#999999;">.</span><span style="color:#393A34;">SimpleModule</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">context</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">Bean</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">context</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">Primary</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">http</span><span style="color:#999999;">.</span><span style="color:#393A34;">converter</span><span style="color:#999999;">.</span><span style="color:#393A34;">json</span><span style="color:#999999;">.</span><span style="color:#393A34;">Jackson2ObjectMapperBuilder</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> javax</span><span style="color:#999999;">.</span><span style="color:#393A34;">servlet</span><span style="color:#999999;">.</span><span style="color:#A65E2B;">*</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> javax</span><span style="color:#999999;">.</span><span style="color:#393A34;">servlet</span><span style="color:#999999;">.</span><span style="color:#393A34;">http</span><span style="color:#999999;">.</span><span style="color:#393A34;">HttpServletRequest</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> java</span><span style="color:#999999;">.</span><span style="color:#393A34;">io</span><span style="color:#999999;">.</span><span style="color:#393A34;">IOException</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">class</span><span style="color:#393A34;"> </span><span style="color:#2E808F;">XssFilter</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">implements</span><span style="color:#393A34;"> </span><span style="color:#59873A;">Filter</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Override</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">void</span><span style="color:#393A34;"> </span><span style="color:#59873A;">destroy</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//  Auto-generated method stub</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Override</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">void</span><span style="color:#393A34;"> </span><span style="color:#59873A;">doFilter</span><span style="color:#999999;">(</span><span style="color:#393A34;">ServletRequest </span><span style="color:#B07D48;">request</span><span style="color:#999999;">,</span><span style="color:#393A34;"> ServletResponse </span><span style="color:#B07D48;">response</span><span style="color:#999999;">,</span><span style="color:#393A34;"> FilterChain </span><span style="color:#B07D48;">chain</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">throws</span><span style="color:#393A34;"> IOException</span><span style="color:#999999;">,</span><span style="color:#393A34;"> ServletException </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//  Auto-generated method stub</span></span>
<span class="line"><span style="color:#393A34;">    HttpServletRequest</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">req</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#393A34;">HttpServletRequest</span><span style="color:#999999;">)</span><span style="color:#393A34;"> request</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    XssAndSqlHttpServletRequestWrapper</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">xssRequestWrapper</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">XssAndSqlHttpServletRequestWrapper</span><span style="color:#999999;">(</span><span style="color:#393A34;">req</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#A0ADA0;">//        BodyReaderHttpServletRequestWrapper bodyReaderHttpServletRequestWrapper = new BodyReaderHttpServletRequestWrapper(xssRequestWrapper);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">chain</span><span style="color:#999999;">.</span><span style="color:#59873A;">doFilter</span><span style="color:#999999;">(</span><span style="color:#393A34;">xssRequestWrapper</span><span style="color:#999999;">,</span><span style="color:#393A34;"> response</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Override</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">void</span><span style="color:#393A34;"> </span><span style="color:#59873A;">init</span><span style="color:#999999;">(</span><span style="color:#393A34;">FilterConfig </span><span style="color:#B07D48;">arg0</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">throws</span><span style="color:#393A34;"> ServletException </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">//  Auto-generated method stub</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Bean</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Primary</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> ObjectMapper </span><span style="color:#59873A;">xssObjectMapper</span><span style="color:#999999;">(</span><span style="color:#393A34;">Jackson2ObjectMapperBuilder </span><span style="color:#B07D48;">builder</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u89E3\u6790\u5668</span></span>
<span class="line"><span style="color:#393A34;">    ObjectMapper</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">objectMapper</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">builder</span><span style="color:#999999;">.</span><span style="color:#59873A;">createXmlMapper</span><span style="color:#999999;">(</span><span style="color:#1E754F;">false</span><span style="color:#999999;">).</span><span style="color:#59873A;">build</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u6CE8\u518Cxss\u89E3\u6790\u5668</span></span>
<span class="line"><span style="color:#393A34;">    SimpleModule</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">xssModule</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">SimpleModule</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">XssStringJsonSerializer</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">xssModule</span><span style="color:#999999;">.</span><span style="color:#59873A;">addSerializer</span><span style="color:#999999;">(</span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">XssStringJsonSerializer</span><span style="color:#999999;">());</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">objectMapper</span><span style="color:#999999;">.</span><span style="color:#59873A;">registerModule</span><span style="color:#999999;">(</span><span style="color:#393A34;">xssModule</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u8FD4\u56DE</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> objectMapper</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="xss-\u5305-xssstringjsonserializer" tabindex="-1">Xss \u5305 <a href="https://github.com/elonehoo/benewy-template/tree/main/project/web/src/main/java/com/beneway/web/xss/XssStringJsonSerializer.java" target="_blank" rel="noreferrer">/XssStringJsonSerializer</a> <a class="header-anchor" href="#xss-\u5305-xssstringjsonserializer" aria-hidden="true">#</a></h3><blockquote><p>\u4F5C\u7528\u4E3A\u5BF9 json \u6570\u636E\u8FDB\u884C\u8FC7\u6EE4</p></blockquote><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#4D9375;">package</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">beneway</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">web</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">xss</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> cn</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">hutool</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">http</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">HtmlUtil</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">fasterxml</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">jackson</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">core</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">JsonGenerator</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">fasterxml</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">jackson</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">databind</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">JsonSerializer</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">fasterxml</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">jackson</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">databind</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">SerializerProvider</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> java</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">io</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">IOException</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">/**</span></span>
<span class="line"><span style="color:#758575DD;"> *</span></span>
<span class="line"><span style="color:#758575DD;"> * @ClassName:  XssStringJsonSerializer</span></span>
<span class="line"><span style="color:#758575DD;"> * @Description:(\u5B9E\u73B0\u8FC7\u6EE4json\u7C7B\u578B)</span></span>
<span class="line"><span style="color:#758575DD;"> *</span></span>
<span class="line"><span style="color:#758575DD;"> */</span></span>
<span class="line"><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">class</span><span style="color:#DBD7CAEE;"> </span><span style="color:#5DA9A7;">XssStringJsonSerializer</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">extends</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">JsonSerializer</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">String</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Override</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> Class</span><span style="color:#666666;">&lt;</span><span style="color:#CB7676;">String</span><span style="color:#666666;">&gt;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">handledType</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">String</span><span style="color:#666666;">.</span><span style="color:#BD976A;">class</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#758575DD;">    /**</span></span>
<span class="line"><span style="color:#758575DD;">     * \u5047\u5982\u6709\u6709html \u4EE3\u7801\u662F\u81EA\u5DF1\u4F20\u6765\u7684  \u9700\u8981\u8BBE\u5B9A\u5BF9\u5E94\u7684name \u4E0D\u8D70StringEscapeUtils.escapeHtml4(value) \u8FC7\u6EE4</span></span>
<span class="line"><span style="color:#758575DD;">     */</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Override</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">void</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">serialize</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">String </span><span style="color:#BD976A;">value</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> JsonGenerator </span><span style="color:#BD976A;">jsonGenerator</span><span style="color:#666666;">,</span><span style="color:#DBD7CAEE;"> SerializerProvider </span><span style="color:#BD976A;">serializerProvider</span><span style="color:#666666;">)</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#CB7676;">throws</span><span style="color:#DBD7CAEE;"> IOException </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">value </span><span style="color:#CB7676;">!=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">null</span><span style="color:#666666;">)</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#666666;">            </span><span style="color:#758575DD;">//  \u8F6C\u4E49 value \u4E2D\u7684HTML\u5B57\u7B26\u4E3A\u5B89\u5168\u7684\u5B57\u7B26</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            String</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">encodedValue</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#BD976A;">HtmlUtil</span><span style="color:#666666;">.</span><span style="color:#80A665;">escape</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">value</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">            </span><span style="color:#BD976A;">jsonGenerator</span><span style="color:#666666;">.</span><span style="color:#80A665;">writeString</span><span style="color:#666666;">(</span><span style="color:#DBD7CAEE;">encodedValue</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#1E754F;">package</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">beneway</span><span style="color:#999999;">.</span><span style="color:#393A34;">web</span><span style="color:#999999;">.</span><span style="color:#393A34;">xss</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> cn</span><span style="color:#999999;">.</span><span style="color:#393A34;">hutool</span><span style="color:#999999;">.</span><span style="color:#393A34;">http</span><span style="color:#999999;">.</span><span style="color:#393A34;">HtmlUtil</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">fasterxml</span><span style="color:#999999;">.</span><span style="color:#393A34;">jackson</span><span style="color:#999999;">.</span><span style="color:#393A34;">core</span><span style="color:#999999;">.</span><span style="color:#393A34;">JsonGenerator</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">fasterxml</span><span style="color:#999999;">.</span><span style="color:#393A34;">jackson</span><span style="color:#999999;">.</span><span style="color:#393A34;">databind</span><span style="color:#999999;">.</span><span style="color:#393A34;">JsonSerializer</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">fasterxml</span><span style="color:#999999;">.</span><span style="color:#393A34;">jackson</span><span style="color:#999999;">.</span><span style="color:#393A34;">databind</span><span style="color:#999999;">.</span><span style="color:#393A34;">SerializerProvider</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> java</span><span style="color:#999999;">.</span><span style="color:#393A34;">io</span><span style="color:#999999;">.</span><span style="color:#393A34;">IOException</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">/**</span></span>
<span class="line"><span style="color:#A0ADA0;"> *</span></span>
<span class="line"><span style="color:#A0ADA0;"> * @ClassName:  XssStringJsonSerializer</span></span>
<span class="line"><span style="color:#A0ADA0;"> * @Description:(\u5B9E\u73B0\u8FC7\u6EE4json\u7C7B\u578B)</span></span>
<span class="line"><span style="color:#A0ADA0;"> *</span></span>
<span class="line"><span style="color:#A0ADA0;"> */</span></span>
<span class="line"><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">class</span><span style="color:#393A34;"> </span><span style="color:#2E808F;">XssStringJsonSerializer</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">extends</span><span style="color:#393A34;"> </span><span style="color:#59873A;">JsonSerializer</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">String</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Override</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> Class</span><span style="color:#999999;">&lt;</span><span style="color:#AB5959;">String</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#59873A;">handledType</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">String</span><span style="color:#999999;">.</span><span style="color:#B07D48;">class</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;">    /**</span></span>
<span class="line"><span style="color:#A0ADA0;">     * \u5047\u5982\u6709\u6709html \u4EE3\u7801\u662F\u81EA\u5DF1\u4F20\u6765\u7684  \u9700\u8981\u8BBE\u5B9A\u5BF9\u5E94\u7684name \u4E0D\u8D70StringEscapeUtils.escapeHtml4(value) \u8FC7\u6EE4</span></span>
<span class="line"><span style="color:#A0ADA0;">     */</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Override</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">void</span><span style="color:#393A34;"> </span><span style="color:#59873A;">serialize</span><span style="color:#999999;">(</span><span style="color:#393A34;">String </span><span style="color:#B07D48;">value</span><span style="color:#999999;">,</span><span style="color:#393A34;"> JsonGenerator </span><span style="color:#B07D48;">jsonGenerator</span><span style="color:#999999;">,</span><span style="color:#393A34;"> SerializerProvider </span><span style="color:#B07D48;">serializerProvider</span><span style="color:#999999;">)</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#AB5959;">throws</span><span style="color:#393A34;"> IOException </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#1E754F;">if</span><span style="color:#393A34;"> </span><span style="color:#999999;">(</span><span style="color:#393A34;">value </span><span style="color:#AB5959;">!=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">null</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#999999;">            </span><span style="color:#A0ADA0;">//  \u8F6C\u4E49 value \u4E2D\u7684HTML\u5B57\u7B26\u4E3A\u5B89\u5168\u7684\u5B57\u7B26</span></span>
<span class="line"><span style="color:#393A34;">            String</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">encodedValue</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">HtmlUtil</span><span style="color:#999999;">.</span><span style="color:#59873A;">escape</span><span style="color:#999999;">(</span><span style="color:#393A34;">value</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">            </span><span style="color:#B07D48;">jsonGenerator</span><span style="color:#999999;">.</span><span style="color:#59873A;">writeString</span><span style="color:#999999;">(</span><span style="color:#393A34;">encodedValue</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="webmvcconfig" tabindex="-1">WebMvcConfig <a class="header-anchor" href="#webmvcconfig" aria-hidden="true">#</a></h3><blockquote><p>\u6B64\u5904\u4EE3\u7801\u793A\u4F8B\u4EC5\u5C06 XssFilter \u8FC7\u6EE4\u5668\u6CE8\u518C\u5E76\u4EA4\u7ED9IOC\u5BB9\u5668\u7BA1\u7406</p></blockquote><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#4D9375;">package</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">beneway</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">web</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">config</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> com</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">beneway</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">web</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">xss</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">XssFilter</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">boot</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">web</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">servlet</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">FilterRegistrationBean</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">context</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Bean</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">context</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">Configuration</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> org</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">springframework</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">web</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">servlet</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">config</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">annotation</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">WebMvcConfigurer</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4D9375;">import</span><span style="color:#DBD7CAEE;"> javax</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">servlet</span><span style="color:#666666;">.</span><span style="color:#DBD7CAEE;">DispatcherType</span><span style="color:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">@</span><span style="color:#CB7676;">Configuration</span></span>
<span class="line"><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">class</span><span style="color:#DBD7CAEE;"> </span><span style="color:#5DA9A7;">WebMvcConfig</span><span style="color:#DBD7CAEE;"> </span><span style="color:#CB7676;">implements</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">WebMvcConfigurer</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#666666;">  </span><span style="color:#758575DD;">// \u5C06\u81EA\u5B9A\u4E49\u7684XssFilter\u6CE8\u518C\u5E76\u4EA4\u7ED9IOC\u5BB9\u5668\u7BA1\u7406</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">@</span><span style="color:#CB7676;">Bean</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#CB7676;">public</span><span style="color:#DBD7CAEE;"> FilterRegistrationBean </span><span style="color:#80A665;">xssFilterRegistration</span><span style="color:#666666;">()</span><span style="color:#DBD7CAEE;"> </span><span style="color:#666666;">{</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    FilterRegistrationBean</span><span style="color:#C99076;"> </span><span style="color:#BD976A;">registration</span><span style="color:#C99076;"> </span><span style="color:#666666;">=</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">FilterRegistrationBean</span><span style="color:#666666;">();</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// filter \u8FC7\u6EE4\u5668\u7684\u89E6\u53D1\u65B9\u5F0F\u4E3AREQUEST</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">registration</span><span style="color:#666666;">.</span><span style="color:#80A665;">setDispatcherTypes</span><span style="color:#666666;">(</span><span style="color:#BD976A;">DispatcherType</span><span style="color:#666666;">.</span><span style="color:#BD976A;">REQUEST</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">registration</span><span style="color:#666666;">.</span><span style="color:#80A665;">setFilter</span><span style="color:#666666;">(</span><span style="color:#4D9375;">new</span><span style="color:#DBD7CAEE;"> </span><span style="color:#80A665;">XssFilter</span><span style="color:#666666;">());</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">registration</span><span style="color:#666666;">.</span><span style="color:#80A665;">addUrlPatterns</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">/*</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">registration</span><span style="color:#666666;">.</span><span style="color:#80A665;">setName</span><span style="color:#666666;">(</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#C98A7D;">xssFilter</span><span style="color:#C98A7DAA;">&quot;</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#666666;">    </span><span style="color:#758575DD;">// \u5C06\u6B64\u8FC7\u6EE4\u5668\u653E\u7F6E\u5728\u8FC7\u6EE4\u94FE\u7684\u6700\u540E\u4E00\u4E2A</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#BD976A;">registration</span><span style="color:#666666;">.</span><span style="color:#80A665;">setOrder</span><span style="color:#666666;">(</span><span style="color:#BD976A;">Integer</span><span style="color:#666666;">.</span><span style="color:#BD976A;">MAX_VALUE</span><span style="color:#666666;">);</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CAEE;"> registration</span><span style="color:#666666;">;</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#666666;">}</span></span>
<span class="line"><span style="color:#666666;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#1E754F;">package</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">beneway</span><span style="color:#999999;">.</span><span style="color:#393A34;">web</span><span style="color:#999999;">.</span><span style="color:#393A34;">config</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> com</span><span style="color:#999999;">.</span><span style="color:#393A34;">beneway</span><span style="color:#999999;">.</span><span style="color:#393A34;">web</span><span style="color:#999999;">.</span><span style="color:#393A34;">xss</span><span style="color:#999999;">.</span><span style="color:#393A34;">XssFilter</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">boot</span><span style="color:#999999;">.</span><span style="color:#393A34;">web</span><span style="color:#999999;">.</span><span style="color:#393A34;">servlet</span><span style="color:#999999;">.</span><span style="color:#393A34;">FilterRegistrationBean</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">context</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">Bean</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">context</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">Configuration</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> org</span><span style="color:#999999;">.</span><span style="color:#393A34;">springframework</span><span style="color:#999999;">.</span><span style="color:#393A34;">web</span><span style="color:#999999;">.</span><span style="color:#393A34;">servlet</span><span style="color:#999999;">.</span><span style="color:#393A34;">config</span><span style="color:#999999;">.</span><span style="color:#393A34;">annotation</span><span style="color:#999999;">.</span><span style="color:#393A34;">WebMvcConfigurer</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> javax</span><span style="color:#999999;">.</span><span style="color:#393A34;">servlet</span><span style="color:#999999;">.</span><span style="color:#393A34;">DispatcherType</span><span style="color:#999999;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">@</span><span style="color:#AB5959;">Configuration</span></span>
<span class="line"><span style="color:#AB5959;">public</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">class</span><span style="color:#393A34;"> </span><span style="color:#2E808F;">WebMvcConfig</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">implements</span><span style="color:#393A34;"> </span><span style="color:#59873A;">WebMvcConfigurer</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// \u5C06\u81EA\u5B9A\u4E49\u7684XssFilter\u6CE8\u518C\u5E76\u4EA4\u7ED9IOC\u5BB9\u5668\u7BA1\u7406</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">@</span><span style="color:#AB5959;">Bean</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">public</span><span style="color:#393A34;"> FilterRegistrationBean </span><span style="color:#59873A;">xssFilterRegistration</span><span style="color:#999999;">()</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    FilterRegistrationBean</span><span style="color:#A65E2B;"> </span><span style="color:#B07D48;">registration</span><span style="color:#A65E2B;"> </span><span style="color:#999999;">=</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">FilterRegistrationBean</span><span style="color:#999999;">();</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// filter \u8FC7\u6EE4\u5668\u7684\u89E6\u53D1\u65B9\u5F0F\u4E3AREQUEST</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">registration</span><span style="color:#999999;">.</span><span style="color:#59873A;">setDispatcherTypes</span><span style="color:#999999;">(</span><span style="color:#B07D48;">DispatcherType</span><span style="color:#999999;">.</span><span style="color:#B07D48;">REQUEST</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">registration</span><span style="color:#999999;">.</span><span style="color:#59873A;">setFilter</span><span style="color:#999999;">(</span><span style="color:#1E754F;">new</span><span style="color:#393A34;"> </span><span style="color:#59873A;">XssFilter</span><span style="color:#999999;">());</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">registration</span><span style="color:#999999;">.</span><span style="color:#59873A;">addUrlPatterns</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">/*</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">registration</span><span style="color:#999999;">.</span><span style="color:#59873A;">setName</span><span style="color:#999999;">(</span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">xssFilter</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#999999;">    </span><span style="color:#A0ADA0;">// \u5C06\u6B64\u8FC7\u6EE4\u5668\u653E\u7F6E\u5728\u8FC7\u6EE4\u94FE\u7684\u6700\u540E\u4E00\u4E2A</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B07D48;">registration</span><span style="color:#999999;">.</span><span style="color:#59873A;">setOrder</span><span style="color:#999999;">(</span><span style="color:#B07D48;">Integer</span><span style="color:#999999;">.</span><span style="color:#B07D48;">MAX_VALUE</span><span style="color:#999999;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1E754F;">return</span><span style="color:#393A34;"> registration</span><span style="color:#999999;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">}</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div>`,15),e=[o];function t(r,c,y,A,i,D){return a(),n("div",null,e)}const C=s(p,[["render",t]]);export{B as __pageData,C as default};
